<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>8dobibim Tech Blog</title>
<meta name="keywords" content="">
<meta name="description" content="🏗️ AWS 환경 설정 가이드

⏱️ 예상 소요시간: 약 30-45분 (설계 및 계획)
💡 난이도: 초급-중급
📋 목표: OpenWebUI 배포를 위한 AWS 인프라 설계 및 구성 계획을 수립합니다.

📋 설정 완료 체크리스트

 네트워크 아키텍처 설계 완료
 리소스 명명 규칙 정의
 보안 그룹 계획 수립
 EKS 클러스터 구성 계획
 비용 계산 및 예산 설정
 백업 및 재해 복구 계획


🎯 전체 아키텍처 개요
시스템 구성도
┌─────────────────────────────────────────────────────────────┐
│                        AWS Cloud                           │
│  ┌─────────────────────────────────────────────────────────┐│
│  │                  VPC (10.0.0.0/16)                     ││
│  │  ┌─────────────────────┐  ┌─────────────────────────────┐││
│  │  │   Public Subnet A   │  │    Public Subnet B         │││
│  │  │   (10.0.1.0/24)     │  │    (10.0.2.0/24)          │││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │  NAT Gateway A  ││  │  │   NAT Gateway B         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │ Internet Gateway││  │  │   Load Balancer         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  └─────────────────────┘  └─────────────────────────────┘││
│  │  ┌─────────────────────┐  ┌─────────────────────────────┐││
│  │  │  Private Subnet A   │  │   Private Subnet B          │││
│  │  │   (10.0.10.0/24)    │  │   (10.0.20.0/24)           │││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │ EKS Node Group A││  │  │  EKS Node Group B       ││││
│  │  │  │                 ││  │  │                         ││││
│  │  │  │ OpenWebUI Pods  ││  │  │   LiteLLM Pods          ││││
│  │  │  │ Monitoring Pods ││  │  │   Database Pods         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  └─────────────────────┘  └─────────────────────────────┘││
│  │                                                         ││
│  │  ┌─────────────────────────────────────────────────────┐││
│  │  │                  EKS Control Plane                  ││
│  │  │                 (AWS Managed)                       ││
│  │  └─────────────────────────────────────────────────────┘││
│  └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘

외부 연결:
- ECR (컨테이너 이미지 저장소)
- S3 (Terraform State, 백업)
- DynamoDB (Terraform Lock)
- CloudWatch (로깅 및 모니터링)
주요 구성 요소 설명

  
      
          구성 요소
          목적
          위치
      
  
  
      
          VPC
          격리된 네트워크 환경
          ap-northeast-2
      
      
          Public Subnet
          인터넷 게이트웨이, 로드밸런서
          2개 AZ
      
      
          Private Subnet
          EKS 워커 노드, 애플리케이션
          2개 AZ
      
      
          EKS Cluster
          Kubernetes 관리형 서비스
          Multi-AZ
      
      
          Node Groups
          EC2 인스턴스 그룹
          Private Subnet
      
      
          ALB
          애플리케이션 로드밸런서
          Public Subnet
      
  


🌐 네트워크 설계
VPC 및 서브넷 구성
기본 네트워크 설정
VPC 설정:
  CIDR: 10.0.0.0/16
  Region: ap-northeast-2 (서울)
  DNS Resolution: Enabled
  DNS Hostnames: Enabled

가용 영역:
  - ap-northeast-2a
  - ap-northeast-2c
서브넷 설계
Public Subnets:
  Public-A:
    CIDR: 10.0.1.0/24
    AZ: ap-northeast-2a
    용도: NAT Gateway, Load Balancer
    
  Public-B:
    CIDR: 10.0.2.0/24
    AZ: ap-northeast-2c
    용도: NAT Gateway, Load Balancer

Private Subnets:
  Private-A:
    CIDR: 10.0.10.0/24
    AZ: ap-northeast-2a
    용도: EKS Worker Nodes
    
  Private-B:
    CIDR: 10.0.20.0/24
    AZ: ap-northeast-2c
    용도: EKS Worker Nodes
라우팅 테이블 설계
Public Route Table
대상: 0.0.0.0/0
게이트웨이: Internet Gateway

연결된 서브넷:
- Public Subnet A
- Public Subnet B
Private Route Tables
Private Route Table A:
  대상: 0.0.0.0/0
  게이트웨이: NAT Gateway A
  연결 서브넷: Private Subnet A

Private Route Table B:
  대상: 0.0.0.0/0
  게이트웨이: NAT Gateway B
  연결 서브넷: Private Subnet B

🔒 보안 그룹 설계
EKS 클러스터 보안 그룹
Control Plane Security Group
이름: openwebui-eks-control-plane-sg
설명: EKS Control Plane 보안 그룹

Inbound Rules:
  - Type: HTTPS
    Port: 443
    Source: Worker Node Security Group
    설명: Worker 노드에서 API 서버 접근

Outbound Rules:
  - Type: All Traffic
    Port: All
    Destination: 0.0.0.0/0
    설명: 모든 아웃바운드 트래픽 허용
Worker Node Security Group
이름: openwebui-eks-worker-sg
설명: EKS Worker Node 보안 그룹

Inbound Rules:
  - Type: All Traffic
    Port: All
    Source: Same Security Group
    설명: 워커 노드간 통신
    
  - Type: Custom TCP
    Port: 1025-65535
    Source: Control Plane Security Group
    설명: Control Plane에서 kubelet 통신
    
  - Type: HTTP
    Port: 80
    Source: ALB Security Group
    설명: 로드밸런서에서 애플리케이션 접근
    
  - Type: Custom TCP
    Port: 30000-32767
    Source: ALB Security Group
    설명: NodePort 서비스 접근

Outbound Rules:
  - Type: All Traffic
    Port: All
    Destination: 0.0.0.0/0
    설명: 모든 아웃바운드 트래픽 허용
Application Load Balancer Security Group
이름: openwebui-alb-sg
설명: ALB 보안 그룹

Inbound Rules:
  - Type: HTTP
    Port: 80
    Source: 0.0.0.0/0
    설명: 인터넷에서 HTTP 접근
    
  - Type: HTTPS
    Port: 443
    Source: 0.0.0.0/0
    설명: 인터넷에서 HTTPS 접근

Outbound Rules:
  - Type: Custom TCP
    Port: 80
    Destination: Worker Node Security Group
    설명: 워커 노드로 트래픽 전달
    
  - Type: Custom TCP
    Port: 30000-32767
    Destination: Worker Node Security Group
    설명: NodePort 서비스 접근

⚙️ EKS 클러스터 설계
클러스터 기본 설정
클러스터 설정:
  이름: openwebui-eks-dev
  버전: 1.28
  엔드포인트 액세스:
    Public: true
    Private: true
  로깅:
    - api
    - audit
    - authenticator
    - controllerManager
    - scheduler
Node Group 설계
Primary Node Group
이름: openwebui-primary-nodes
인스턴스 타입: t3.medium
스케일링:
  최소: 2
  최대: 4
  원하는 용량: 2
  
디스크:
  크기: 20GB
  타입: gp3
  
레이블:
  environment: dev
  nodegroup: primary
  
Taints: 없음
Spot Instance Node Group (비용 절약용)
이름: openwebui-spot-nodes
인스턴스 타입: 
  - t3.medium
  - t3.large
  - m5.large
구매 옵션: Spot Instance
스케일링:
  최소: 0
  최대: 3
  원하는 용량: 1
  
레이블:
  environment: dev
  nodegroup: spot
  
Taints:
  - Key: spot
    Value: &#34;true&#34;
    Effect: NoSchedule
Add-ons 설정
필수 Add-ons:
  - vpc-cni (네트워킹)
  - coredns (DNS)
  - kube-proxy (네트워크 프록시)
  
추가 Add-ons:
  - aws-load-balancer-controller
  - ebs-csi-driver
  - cluster-autoscaler

🏷️ 리소스 명명 규칙
명명 규칙 표준
형식: {project}-{resource-type}-{environment}-{optional-suffix}

예시:
  VPC: openwebui-vpc-dev
  Subnet: openwebui-public-subnet-dev-a
  Security Group: openwebui-eks-sg-dev
  EKS Cluster: openwebui-eks-dev
  Node Group: openwebui-primary-nodes-dev
  Load Balancer: openwebui-alb-dev
태그 전략
모든 리소스 공통 태그:
  Project: openwebui
  Environment: dev
  Owner: team-name
  ManagedBy: terraform
  
리소스별 추가 태그:
  EKS Cluster:
    kubernetes.io/cluster/openwebui-eks-dev: owned
  
  Subnet:
    kubernetes.io/role/elb: 1 (public subnet)
    kubernetes.io/role/internal-elb: 1 (private subnet)

💰 비용 계산 및 최적화
예상 월 비용 (서울 리전 기준)
기본 구성

  
      
          서비스
          스펙
          월 예상 비용
          설명
      
  
  
      
          EKS Control Plane
          관리형 서비스
          $72
          클러스터당 고정 비용
      
      
          EC2 인스턴스
          2x t3.medium
          $60
          워커 노드 (on-demand)
      
      
          EBS 볼륨
          40GB gp3
          $4
          워커 노드 스토리지
      
      
          NAT Gateway
          2개 AZ
          $64
          각 AZ당 $32
      
      
          Load Balancer
          ALB
          $22
          기본 요금 &#43; 트래픽
      
      
          데이터 전송
          예상 10GB
          $1
          아웃바운드 트래픽
      
      
          기타 서비스
          ECR, CloudWatch
          $5
          로그, 이미지 저장
      
  

총 예상 비용: 월 $228">
<meta name="author" content="">
<link rel="canonical" href="https://8dobibim.github.io/backend/aws-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://8dobibim.github.io/backend/aws-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://8dobibim.github.io/backend/aws-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95/">
  <meta property="og:site_name" content="8dobibim Tech Blog">
  <meta property="og:title" content="8dobibim Tech Blog">
  <meta property="og:description" content="🏗️ AWS 환경 설정 가이드 ⏱️ 예상 소요시간: 약 30-45분 (설계 및 계획)
💡 난이도: 초급-중급
📋 목표: OpenWebUI 배포를 위한 AWS 인프라 설계 및 구성 계획을 수립합니다.
📋 설정 완료 체크리스트 네트워크 아키텍처 설계 완료 리소스 명명 규칙 정의 보안 그룹 계획 수립 EKS 클러스터 구성 계획 비용 계산 및 예산 설정 백업 및 재해 복구 계획 🎯 전체 아키텍처 개요 시스템 구성도 ┌─────────────────────────────────────────────────────────────┐│ AWS Cloud ││ ┌─────────────────────────────────────────────────────────┐││ │ VPC (10.0.0.0/16) │││ │ ┌─────────────────────┐ ┌─────────────────────────────┐│││ │ │ Public Subnet A │ │ Public Subnet B ││││ │ │ (10.0.1.0/24) │ │ (10.0.2.0/24) ││││ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐││││ │ │ │ NAT Gateway A ││ │ │ NAT Gateway B │││││ │ │ └─────────────────┘│ │ └─────────────────────────┘││││ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐││││ │ │ │ Internet Gateway││ │ │ Load Balancer │││││ │ │ └─────────────────┘│ │ └─────────────────────────┘││││ │ └─────────────────────┘ └─────────────────────────────┘│││ │ ┌─────────────────────┐ ┌─────────────────────────────┐│││ │ │ Private Subnet A │ │ Private Subnet B ││││ │ │ (10.0.10.0/24) │ │ (10.0.20.0/24) ││││ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐││││ │ │ │ EKS Node Group A││ │ │ EKS Node Group B │││││ │ │ │ ││ │ │ │││││ │ │ │ OpenWebUI Pods ││ │ │ LiteLLM Pods │││││ │ │ │ Monitoring Pods ││ │ │ Database Pods │││││ │ │ └─────────────────┘│ │ └─────────────────────────┘││││ │ └─────────────────────┘ └─────────────────────────────┘│││ │ │││ │ ┌─────────────────────────────────────────────────────┐│││ │ │ EKS Control Plane │││ │ │ (AWS Managed) │││ │ └─────────────────────────────────────────────────────┘│││ └─────────────────────────────────────────────────────────┘│└─────────────────────────────────────────────────────────────┘외부 연결:- ECR (컨테이너 이미지 저장소)- S3 (Terraform State, 백업)- DynamoDB (Terraform Lock)- CloudWatch (로깅 및 모니터링) 주요 구성 요소 설명 구성 요소 목적 위치 VPC 격리된 네트워크 환경 ap-northeast-2 Public Subnet 인터넷 게이트웨이, 로드밸런서 2개 AZ Private Subnet EKS 워커 노드, 애플리케이션 2개 AZ EKS Cluster Kubernetes 관리형 서비스 Multi-AZ Node Groups EC2 인스턴스 그룹 Private Subnet ALB 애플리케이션 로드밸런서 Public Subnet 🌐 네트워크 설계 VPC 및 서브넷 구성 기본 네트워크 설정 VPC 설정: CIDR: 10.0.0.0/16 Region: ap-northeast-2 (서울) DNS Resolution: Enabled DNS Hostnames: Enabled 가용 영역: - ap-northeast-2a - ap-northeast-2c 서브넷 설계 Public Subnets: Public-A: CIDR: 10.0.1.0/24 AZ: ap-northeast-2a 용도: NAT Gateway, Load Balancer Public-B: CIDR: 10.0.2.0/24 AZ: ap-northeast-2c 용도: NAT Gateway, Load Balancer Private Subnets: Private-A: CIDR: 10.0.10.0/24 AZ: ap-northeast-2a 용도: EKS Worker Nodes Private-B: CIDR: 10.0.20.0/24 AZ: ap-northeast-2c 용도: EKS Worker Nodes 라우팅 테이블 설계 Public Route Table 대상: 0.0.0.0/0 게이트웨이: Internet Gateway 연결된 서브넷: - Public Subnet A - Public Subnet B Private Route Tables Private Route Table A: 대상: 0.0.0.0/0 게이트웨이: NAT Gateway A 연결 서브넷: Private Subnet A Private Route Table B: 대상: 0.0.0.0/0 게이트웨이: NAT Gateway B 연결 서브넷: Private Subnet B 🔒 보안 그룹 설계 EKS 클러스터 보안 그룹 Control Plane Security Group 이름: openwebui-eks-control-plane-sg 설명: EKS Control Plane 보안 그룹 Inbound Rules: - Type: HTTPS Port: 443 Source: Worker Node Security Group 설명: Worker 노드에서 API 서버 접근 Outbound Rules: - Type: All Traffic Port: All Destination: 0.0.0.0/0 설명: 모든 아웃바운드 트래픽 허용 Worker Node Security Group 이름: openwebui-eks-worker-sg 설명: EKS Worker Node 보안 그룹 Inbound Rules: - Type: All Traffic Port: All Source: Same Security Group 설명: 워커 노드간 통신 - Type: Custom TCP Port: 1025-65535 Source: Control Plane Security Group 설명: Control Plane에서 kubelet 통신 - Type: HTTP Port: 80 Source: ALB Security Group 설명: 로드밸런서에서 애플리케이션 접근 - Type: Custom TCP Port: 30000-32767 Source: ALB Security Group 설명: NodePort 서비스 접근 Outbound Rules: - Type: All Traffic Port: All Destination: 0.0.0.0/0 설명: 모든 아웃바운드 트래픽 허용 Application Load Balancer Security Group 이름: openwebui-alb-sg 설명: ALB 보안 그룹 Inbound Rules: - Type: HTTP Port: 80 Source: 0.0.0.0/0 설명: 인터넷에서 HTTP 접근 - Type: HTTPS Port: 443 Source: 0.0.0.0/0 설명: 인터넷에서 HTTPS 접근 Outbound Rules: - Type: Custom TCP Port: 80 Destination: Worker Node Security Group 설명: 워커 노드로 트래픽 전달 - Type: Custom TCP Port: 30000-32767 Destination: Worker Node Security Group 설명: NodePort 서비스 접근 ⚙️ EKS 클러스터 설계 클러스터 기본 설정 클러스터 설정: 이름: openwebui-eks-dev 버전: 1.28 엔드포인트 액세스: Public: true Private: true 로깅: - api - audit - authenticator - controllerManager - scheduler Node Group 설계 Primary Node Group 이름: openwebui-primary-nodes 인스턴스 타입: t3.medium 스케일링: 최소: 2 최대: 4 원하는 용량: 2 디스크: 크기: 20GB 타입: gp3 레이블: environment: dev nodegroup: primary Taints: 없음 Spot Instance Node Group (비용 절약용) 이름: openwebui-spot-nodes 인스턴스 타입: - t3.medium - t3.large - m5.large 구매 옵션: Spot Instance 스케일링: 최소: 0 최대: 3 원하는 용량: 1 레이블: environment: dev nodegroup: spot Taints: - Key: spot Value: &#34;true&#34; Effect: NoSchedule Add-ons 설정 필수 Add-ons: - vpc-cni (네트워킹) - coredns (DNS) - kube-proxy (네트워크 프록시) 추가 Add-ons: - aws-load-balancer-controller - ebs-csi-driver - cluster-autoscaler 🏷️ 리소스 명명 규칙 명명 규칙 표준 형식: {project}-{resource-type}-{environment}-{optional-suffix} 예시: VPC: openwebui-vpc-dev Subnet: openwebui-public-subnet-dev-a Security Group: openwebui-eks-sg-dev EKS Cluster: openwebui-eks-dev Node Group: openwebui-primary-nodes-dev Load Balancer: openwebui-alb-dev 태그 전략 모든 리소스 공통 태그: Project: openwebui Environment: dev Owner: team-name ManagedBy: terraform 리소스별 추가 태그: EKS Cluster: kubernetes.io/cluster/openwebui-eks-dev: owned Subnet: kubernetes.io/role/elb: 1 (public subnet) kubernetes.io/role/internal-elb: 1 (private subnet) 💰 비용 계산 및 최적화 예상 월 비용 (서울 리전 기준) 기본 구성 서비스 스펙 월 예상 비용 설명 EKS Control Plane 관리형 서비스 $72 클러스터당 고정 비용 EC2 인스턴스 2x t3.medium $60 워커 노드 (on-demand) EBS 볼륨 40GB gp3 $4 워커 노드 스토리지 NAT Gateway 2개 AZ $64 각 AZ당 $32 Load Balancer ALB $22 기본 요금 &#43; 트래픽 데이터 전송 예상 10GB $1 아웃바운드 트래픽 기타 서비스 ECR, CloudWatch $5 로그, 이미지 저장 총 예상 비용: 월 $228">
  <meta property="og:locale" content="ko">
  <meta property="og:type" content="article">
    <meta property="article:section" content="backend">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="">
<meta name="twitter:description" content="🏗️ AWS 환경 설정 가이드

⏱️ 예상 소요시간: 약 30-45분 (설계 및 계획)
💡 난이도: 초급-중급
📋 목표: OpenWebUI 배포를 위한 AWS 인프라 설계 및 구성 계획을 수립합니다.

📋 설정 완료 체크리스트

 네트워크 아키텍처 설계 완료
 리소스 명명 규칙 정의
 보안 그룹 계획 수립
 EKS 클러스터 구성 계획
 비용 계산 및 예산 설정
 백업 및 재해 복구 계획


🎯 전체 아키텍처 개요
시스템 구성도
┌─────────────────────────────────────────────────────────────┐
│                        AWS Cloud                           │
│  ┌─────────────────────────────────────────────────────────┐│
│  │                  VPC (10.0.0.0/16)                     ││
│  │  ┌─────────────────────┐  ┌─────────────────────────────┐││
│  │  │   Public Subnet A   │  │    Public Subnet B         │││
│  │  │   (10.0.1.0/24)     │  │    (10.0.2.0/24)          │││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │  NAT Gateway A  ││  │  │   NAT Gateway B         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │ Internet Gateway││  │  │   Load Balancer         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  └─────────────────────┘  └─────────────────────────────┘││
│  │  ┌─────────────────────┐  ┌─────────────────────────────┐││
│  │  │  Private Subnet A   │  │   Private Subnet B          │││
│  │  │   (10.0.10.0/24)    │  │   (10.0.20.0/24)           │││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │ EKS Node Group A││  │  │  EKS Node Group B       ││││
│  │  │  │                 ││  │  │                         ││││
│  │  │  │ OpenWebUI Pods  ││  │  │   LiteLLM Pods          ││││
│  │  │  │ Monitoring Pods ││  │  │   Database Pods         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  └─────────────────────┘  └─────────────────────────────┘││
│  │                                                         ││
│  │  ┌─────────────────────────────────────────────────────┐││
│  │  │                  EKS Control Plane                  ││
│  │  │                 (AWS Managed)                       ││
│  │  └─────────────────────────────────────────────────────┘││
│  └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘

외부 연결:
- ECR (컨테이너 이미지 저장소)
- S3 (Terraform State, 백업)
- DynamoDB (Terraform Lock)
- CloudWatch (로깅 및 모니터링)
주요 구성 요소 설명

  
      
          구성 요소
          목적
          위치
      
  
  
      
          VPC
          격리된 네트워크 환경
          ap-northeast-2
      
      
          Public Subnet
          인터넷 게이트웨이, 로드밸런서
          2개 AZ
      
      
          Private Subnet
          EKS 워커 노드, 애플리케이션
          2개 AZ
      
      
          EKS Cluster
          Kubernetes 관리형 서비스
          Multi-AZ
      
      
          Node Groups
          EC2 인스턴스 그룹
          Private Subnet
      
      
          ALB
          애플리케이션 로드밸런서
          Public Subnet
      
  


🌐 네트워크 설계
VPC 및 서브넷 구성
기본 네트워크 설정
VPC 설정:
  CIDR: 10.0.0.0/16
  Region: ap-northeast-2 (서울)
  DNS Resolution: Enabled
  DNS Hostnames: Enabled

가용 영역:
  - ap-northeast-2a
  - ap-northeast-2c
서브넷 설계
Public Subnets:
  Public-A:
    CIDR: 10.0.1.0/24
    AZ: ap-northeast-2a
    용도: NAT Gateway, Load Balancer
    
  Public-B:
    CIDR: 10.0.2.0/24
    AZ: ap-northeast-2c
    용도: NAT Gateway, Load Balancer

Private Subnets:
  Private-A:
    CIDR: 10.0.10.0/24
    AZ: ap-northeast-2a
    용도: EKS Worker Nodes
    
  Private-B:
    CIDR: 10.0.20.0/24
    AZ: ap-northeast-2c
    용도: EKS Worker Nodes
라우팅 테이블 설계
Public Route Table
대상: 0.0.0.0/0
게이트웨이: Internet Gateway

연결된 서브넷:
- Public Subnet A
- Public Subnet B
Private Route Tables
Private Route Table A:
  대상: 0.0.0.0/0
  게이트웨이: NAT Gateway A
  연결 서브넷: Private Subnet A

Private Route Table B:
  대상: 0.0.0.0/0
  게이트웨이: NAT Gateway B
  연결 서브넷: Private Subnet B

🔒 보안 그룹 설계
EKS 클러스터 보안 그룹
Control Plane Security Group
이름: openwebui-eks-control-plane-sg
설명: EKS Control Plane 보안 그룹

Inbound Rules:
  - Type: HTTPS
    Port: 443
    Source: Worker Node Security Group
    설명: Worker 노드에서 API 서버 접근

Outbound Rules:
  - Type: All Traffic
    Port: All
    Destination: 0.0.0.0/0
    설명: 모든 아웃바운드 트래픽 허용
Worker Node Security Group
이름: openwebui-eks-worker-sg
설명: EKS Worker Node 보안 그룹

Inbound Rules:
  - Type: All Traffic
    Port: All
    Source: Same Security Group
    설명: 워커 노드간 통신
    
  - Type: Custom TCP
    Port: 1025-65535
    Source: Control Plane Security Group
    설명: Control Plane에서 kubelet 통신
    
  - Type: HTTP
    Port: 80
    Source: ALB Security Group
    설명: 로드밸런서에서 애플리케이션 접근
    
  - Type: Custom TCP
    Port: 30000-32767
    Source: ALB Security Group
    설명: NodePort 서비스 접근

Outbound Rules:
  - Type: All Traffic
    Port: All
    Destination: 0.0.0.0/0
    설명: 모든 아웃바운드 트래픽 허용
Application Load Balancer Security Group
이름: openwebui-alb-sg
설명: ALB 보안 그룹

Inbound Rules:
  - Type: HTTP
    Port: 80
    Source: 0.0.0.0/0
    설명: 인터넷에서 HTTP 접근
    
  - Type: HTTPS
    Port: 443
    Source: 0.0.0.0/0
    설명: 인터넷에서 HTTPS 접근

Outbound Rules:
  - Type: Custom TCP
    Port: 80
    Destination: Worker Node Security Group
    설명: 워커 노드로 트래픽 전달
    
  - Type: Custom TCP
    Port: 30000-32767
    Destination: Worker Node Security Group
    설명: NodePort 서비스 접근

⚙️ EKS 클러스터 설계
클러스터 기본 설정
클러스터 설정:
  이름: openwebui-eks-dev
  버전: 1.28
  엔드포인트 액세스:
    Public: true
    Private: true
  로깅:
    - api
    - audit
    - authenticator
    - controllerManager
    - scheduler
Node Group 설계
Primary Node Group
이름: openwebui-primary-nodes
인스턴스 타입: t3.medium
스케일링:
  최소: 2
  최대: 4
  원하는 용량: 2
  
디스크:
  크기: 20GB
  타입: gp3
  
레이블:
  environment: dev
  nodegroup: primary
  
Taints: 없음
Spot Instance Node Group (비용 절약용)
이름: openwebui-spot-nodes
인스턴스 타입: 
  - t3.medium
  - t3.large
  - m5.large
구매 옵션: Spot Instance
스케일링:
  최소: 0
  최대: 3
  원하는 용량: 1
  
레이블:
  environment: dev
  nodegroup: spot
  
Taints:
  - Key: spot
    Value: &#34;true&#34;
    Effect: NoSchedule
Add-ons 설정
필수 Add-ons:
  - vpc-cni (네트워킹)
  - coredns (DNS)
  - kube-proxy (네트워크 프록시)
  
추가 Add-ons:
  - aws-load-balancer-controller
  - ebs-csi-driver
  - cluster-autoscaler

🏷️ 리소스 명명 규칙
명명 규칙 표준
형식: {project}-{resource-type}-{environment}-{optional-suffix}

예시:
  VPC: openwebui-vpc-dev
  Subnet: openwebui-public-subnet-dev-a
  Security Group: openwebui-eks-sg-dev
  EKS Cluster: openwebui-eks-dev
  Node Group: openwebui-primary-nodes-dev
  Load Balancer: openwebui-alb-dev
태그 전략
모든 리소스 공통 태그:
  Project: openwebui
  Environment: dev
  Owner: team-name
  ManagedBy: terraform
  
리소스별 추가 태그:
  EKS Cluster:
    kubernetes.io/cluster/openwebui-eks-dev: owned
  
  Subnet:
    kubernetes.io/role/elb: 1 (public subnet)
    kubernetes.io/role/internal-elb: 1 (private subnet)

💰 비용 계산 및 최적화
예상 월 비용 (서울 리전 기준)
기본 구성

  
      
          서비스
          스펙
          월 예상 비용
          설명
      
  
  
      
          EKS Control Plane
          관리형 서비스
          $72
          클러스터당 고정 비용
      
      
          EC2 인스턴스
          2x t3.medium
          $60
          워커 노드 (on-demand)
      
      
          EBS 볼륨
          40GB gp3
          $4
          워커 노드 스토리지
      
      
          NAT Gateway
          2개 AZ
          $64
          각 AZ당 $32
      
      
          Load Balancer
          ALB
          $22
          기본 요금 &#43; 트래픽
      
      
          데이터 전송
          예상 10GB
          $1
          아웃바운드 트래픽
      
      
          기타 서비스
          ECR, CloudWatch
          $5
          로그, 이미지 저장
      
  

총 예상 비용: 월 $228">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Backend 문서",
      "item": "https://8dobibim.github.io/backend/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "",
      "item": "https://8dobibim.github.io/backend/aws-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "name": "",
  "description": "🏗️ AWS 환경 설정 가이드 ⏱️ 예상 소요시간: 약 30-45분 (설계 및 계획)\n💡 난이도: 초급-중급\n📋 목표: OpenWebUI 배포를 위한 AWS 인프라 설계 및 구성 계획을 수립합니다.\n📋 설정 완료 체크리스트 네트워크 아키텍처 설계 완료 리소스 명명 규칙 정의 보안 그룹 계획 수립 EKS 클러스터 구성 계획 비용 계산 및 예산 설정 백업 및 재해 복구 계획 🎯 전체 아키텍처 개요 시스템 구성도 ┌─────────────────────────────────────────────────────────────┐\r│ AWS Cloud │\r│ ┌─────────────────────────────────────────────────────────┐│\r│ │ VPC (10.0.0.0/16) ││\r│ │ ┌─────────────────────┐ ┌─────────────────────────────┐││\r│ │ │ Public Subnet A │ │ Public Subnet B │││\r│ │ │ (10.0.1.0/24) │ │ (10.0.2.0/24) │││\r│ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐│││\r│ │ │ │ NAT Gateway A ││ │ │ NAT Gateway B ││││\r│ │ │ └─────────────────┘│ │ └─────────────────────────┘│││\r│ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐│││\r│ │ │ │ Internet Gateway││ │ │ Load Balancer ││││\r│ │ │ └─────────────────┘│ │ └─────────────────────────┘│││\r│ │ └─────────────────────┘ └─────────────────────────────┘││\r│ │ ┌─────────────────────┐ ┌─────────────────────────────┐││\r│ │ │ Private Subnet A │ │ Private Subnet B │││\r│ │ │ (10.0.10.0/24) │ │ (10.0.20.0/24) │││\r│ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐│││\r│ │ │ │ EKS Node Group A││ │ │ EKS Node Group B ││││\r│ │ │ │ ││ │ │ ││││\r│ │ │ │ OpenWebUI Pods ││ │ │ LiteLLM Pods ││││\r│ │ │ │ Monitoring Pods ││ │ │ Database Pods ││││\r│ │ │ └─────────────────┘│ │ └─────────────────────────┘│││\r│ │ └─────────────────────┘ └─────────────────────────────┘││\r│ │ ││\r│ │ ┌─────────────────────────────────────────────────────┐││\r│ │ │ EKS Control Plane ││\r│ │ │ (AWS Managed) ││\r│ │ └─────────────────────────────────────────────────────┘││\r│ └─────────────────────────────────────────────────────────┘│\r└─────────────────────────────────────────────────────────────┘\r외부 연결:\r- ECR (컨테이너 이미지 저장소)\r- S3 (Terraform State, 백업)\r- DynamoDB (Terraform Lock)\r- CloudWatch (로깅 및 모니터링) 주요 구성 요소 설명 구성 요소 목적 위치 VPC 격리된 네트워크 환경 ap-northeast-2 Public Subnet 인터넷 게이트웨이, 로드밸런서 2개 AZ Private Subnet EKS 워커 노드, 애플리케이션 2개 AZ EKS Cluster Kubernetes 관리형 서비스 Multi-AZ Node Groups EC2 인스턴스 그룹 Private Subnet ALB 애플리케이션 로드밸런서 Public Subnet 🌐 네트워크 설계 VPC 및 서브넷 구성 기본 네트워크 설정 VPC 설정: CIDR: 10.0.0.0/16 Region: ap-northeast-2 (서울) DNS Resolution: Enabled DNS Hostnames: Enabled 가용 영역: - ap-northeast-2a - ap-northeast-2c 서브넷 설계 Public Subnets: Public-A: CIDR: 10.0.1.0/24 AZ: ap-northeast-2a 용도: NAT Gateway, Load Balancer Public-B: CIDR: 10.0.2.0/24 AZ: ap-northeast-2c 용도: NAT Gateway, Load Balancer Private Subnets: Private-A: CIDR: 10.0.10.0/24 AZ: ap-northeast-2a 용도: EKS Worker Nodes Private-B: CIDR: 10.0.20.0/24 AZ: ap-northeast-2c 용도: EKS Worker Nodes 라우팅 테이블 설계 Public Route Table 대상: 0.0.0.0/0 게이트웨이: Internet Gateway 연결된 서브넷: - Public Subnet A - Public Subnet B Private Route Tables Private Route Table A: 대상: 0.0.0.0/0 게이트웨이: NAT Gateway A 연결 서브넷: Private Subnet A Private Route Table B: 대상: 0.0.0.0/0 게이트웨이: NAT Gateway B 연결 서브넷: Private Subnet B 🔒 보안 그룹 설계 EKS 클러스터 보안 그룹 Control Plane Security Group 이름: openwebui-eks-control-plane-sg 설명: EKS Control Plane 보안 그룹 Inbound Rules: - Type: HTTPS Port: 443 Source: Worker Node Security Group 설명: Worker 노드에서 API 서버 접근 Outbound Rules: - Type: All Traffic Port: All Destination: 0.0.0.0/0 설명: 모든 아웃바운드 트래픽 허용 Worker Node Security Group 이름: openwebui-eks-worker-sg 설명: EKS Worker Node 보안 그룹 Inbound Rules: - Type: All Traffic Port: All Source: Same Security Group 설명: 워커 노드간 통신 - Type: Custom TCP Port: 1025-65535 Source: Control Plane Security Group 설명: Control Plane에서 kubelet 통신 - Type: HTTP Port: 80 Source: ALB Security Group 설명: 로드밸런서에서 애플리케이션 접근 - Type: Custom TCP Port: 30000-32767 Source: ALB Security Group 설명: NodePort 서비스 접근 Outbound Rules: - Type: All Traffic Port: All Destination: 0.0.0.0/0 설명: 모든 아웃바운드 트래픽 허용 Application Load Balancer Security Group 이름: openwebui-alb-sg 설명: ALB 보안 그룹 Inbound Rules: - Type: HTTP Port: 80 Source: 0.0.0.0/0 설명: 인터넷에서 HTTP 접근 - Type: HTTPS Port: 443 Source: 0.0.0.0/0 설명: 인터넷에서 HTTPS 접근 Outbound Rules: - Type: Custom TCP Port: 80 Destination: Worker Node Security Group 설명: 워커 노드로 트래픽 전달 - Type: Custom TCP Port: 30000-32767 Destination: Worker Node Security Group 설명: NodePort 서비스 접근 ⚙️ EKS 클러스터 설계 클러스터 기본 설정 클러스터 설정: 이름: openwebui-eks-dev 버전: 1.28 엔드포인트 액세스: Public: true Private: true 로깅: - api - audit - authenticator - controllerManager - scheduler Node Group 설계 Primary Node Group 이름: openwebui-primary-nodes 인스턴스 타입: t3.medium 스케일링: 최소: 2 최대: 4 원하는 용량: 2 디스크: 크기: 20GB 타입: gp3 레이블: environment: dev nodegroup: primary Taints: 없음 Spot Instance Node Group (비용 절약용) 이름: openwebui-spot-nodes 인스턴스 타입: - t3.medium - t3.large - m5.large 구매 옵션: Spot Instance 스케일링: 최소: 0 최대: 3 원하는 용량: 1 레이블: environment: dev nodegroup: spot Taints: - Key: spot Value: \u0026#34;true\u0026#34; Effect: NoSchedule Add-ons 설정 필수 Add-ons: - vpc-cni (네트워킹) - coredns (DNS) - kube-proxy (네트워크 프록시) 추가 Add-ons: - aws-load-balancer-controller - ebs-csi-driver - cluster-autoscaler 🏷️ 리소스 명명 규칙 명명 규칙 표준 형식: {project}-{resource-type}-{environment}-{optional-suffix} 예시: VPC: openwebui-vpc-dev Subnet: openwebui-public-subnet-dev-a Security Group: openwebui-eks-sg-dev EKS Cluster: openwebui-eks-dev Node Group: openwebui-primary-nodes-dev Load Balancer: openwebui-alb-dev 태그 전략 모든 리소스 공통 태그: Project: openwebui Environment: dev Owner: team-name ManagedBy: terraform 리소스별 추가 태그: EKS Cluster: kubernetes.io/cluster/openwebui-eks-dev: owned Subnet: kubernetes.io/role/elb: 1 (public subnet) kubernetes.io/role/internal-elb: 1 (private subnet) 💰 비용 계산 및 최적화 예상 월 비용 (서울 리전 기준) 기본 구성 서비스 스펙 월 예상 비용 설명 EKS Control Plane 관리형 서비스 $72 클러스터당 고정 비용 EC2 인스턴스 2x t3.medium $60 워커 노드 (on-demand) EBS 볼륨 40GB gp3 $4 워커 노드 스토리지 NAT Gateway 2개 AZ $64 각 AZ당 $32 Load Balancer ALB $22 기본 요금 + 트래픽 데이터 전송 예상 10GB $1 아웃바운드 트래픽 기타 서비스 ECR, CloudWatch $5 로그, 이미지 저장 총 예상 비용: 월 $228\n",
  "keywords": [
    
  ],
  "articleBody": "🏗️ AWS 환경 설정 가이드 ⏱️ 예상 소요시간: 약 30-45분 (설계 및 계획)\n💡 난이도: 초급-중급\n📋 목표: OpenWebUI 배포를 위한 AWS 인프라 설계 및 구성 계획을 수립합니다.\n📋 설정 완료 체크리스트 네트워크 아키텍처 설계 완료 리소스 명명 규칙 정의 보안 그룹 계획 수립 EKS 클러스터 구성 계획 비용 계산 및 예산 설정 백업 및 재해 복구 계획 🎯 전체 아키텍처 개요 시스템 구성도 ┌─────────────────────────────────────────────────────────────┐\r│ AWS Cloud │\r│ ┌─────────────────────────────────────────────────────────┐│\r│ │ VPC (10.0.0.0/16) ││\r│ │ ┌─────────────────────┐ ┌─────────────────────────────┐││\r│ │ │ Public Subnet A │ │ Public Subnet B │││\r│ │ │ (10.0.1.0/24) │ │ (10.0.2.0/24) │││\r│ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐│││\r│ │ │ │ NAT Gateway A ││ │ │ NAT Gateway B ││││\r│ │ │ └─────────────────┘│ │ └─────────────────────────┘│││\r│ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐│││\r│ │ │ │ Internet Gateway││ │ │ Load Balancer ││││\r│ │ │ └─────────────────┘│ │ └─────────────────────────┘│││\r│ │ └─────────────────────┘ └─────────────────────────────┘││\r│ │ ┌─────────────────────┐ ┌─────────────────────────────┐││\r│ │ │ Private Subnet A │ │ Private Subnet B │││\r│ │ │ (10.0.10.0/24) │ │ (10.0.20.0/24) │││\r│ │ │ ┌─────────────────┐│ │ ┌─────────────────────────┐│││\r│ │ │ │ EKS Node Group A││ │ │ EKS Node Group B ││││\r│ │ │ │ ││ │ │ ││││\r│ │ │ │ OpenWebUI Pods ││ │ │ LiteLLM Pods ││││\r│ │ │ │ Monitoring Pods ││ │ │ Database Pods ││││\r│ │ │ └─────────────────┘│ │ └─────────────────────────┘│││\r│ │ └─────────────────────┘ └─────────────────────────────┘││\r│ │ ││\r│ │ ┌─────────────────────────────────────────────────────┐││\r│ │ │ EKS Control Plane ││\r│ │ │ (AWS Managed) ││\r│ │ └─────────────────────────────────────────────────────┘││\r│ └─────────────────────────────────────────────────────────┘│\r└─────────────────────────────────────────────────────────────┘\r외부 연결:\r- ECR (컨테이너 이미지 저장소)\r- S3 (Terraform State, 백업)\r- DynamoDB (Terraform Lock)\r- CloudWatch (로깅 및 모니터링) 주요 구성 요소 설명 구성 요소 목적 위치 VPC 격리된 네트워크 환경 ap-northeast-2 Public Subnet 인터넷 게이트웨이, 로드밸런서 2개 AZ Private Subnet EKS 워커 노드, 애플리케이션 2개 AZ EKS Cluster Kubernetes 관리형 서비스 Multi-AZ Node Groups EC2 인스턴스 그룹 Private Subnet ALB 애플리케이션 로드밸런서 Public Subnet 🌐 네트워크 설계 VPC 및 서브넷 구성 기본 네트워크 설정 VPC 설정: CIDR: 10.0.0.0/16 Region: ap-northeast-2 (서울) DNS Resolution: Enabled DNS Hostnames: Enabled 가용 영역: - ap-northeast-2a - ap-northeast-2c 서브넷 설계 Public Subnets: Public-A: CIDR: 10.0.1.0/24 AZ: ap-northeast-2a 용도: NAT Gateway, Load Balancer Public-B: CIDR: 10.0.2.0/24 AZ: ap-northeast-2c 용도: NAT Gateway, Load Balancer Private Subnets: Private-A: CIDR: 10.0.10.0/24 AZ: ap-northeast-2a 용도: EKS Worker Nodes Private-B: CIDR: 10.0.20.0/24 AZ: ap-northeast-2c 용도: EKS Worker Nodes 라우팅 테이블 설계 Public Route Table 대상: 0.0.0.0/0 게이트웨이: Internet Gateway 연결된 서브넷: - Public Subnet A - Public Subnet B Private Route Tables Private Route Table A: 대상: 0.0.0.0/0 게이트웨이: NAT Gateway A 연결 서브넷: Private Subnet A Private Route Table B: 대상: 0.0.0.0/0 게이트웨이: NAT Gateway B 연결 서브넷: Private Subnet B 🔒 보안 그룹 설계 EKS 클러스터 보안 그룹 Control Plane Security Group 이름: openwebui-eks-control-plane-sg 설명: EKS Control Plane 보안 그룹 Inbound Rules: - Type: HTTPS Port: 443 Source: Worker Node Security Group 설명: Worker 노드에서 API 서버 접근 Outbound Rules: - Type: All Traffic Port: All Destination: 0.0.0.0/0 설명: 모든 아웃바운드 트래픽 허용 Worker Node Security Group 이름: openwebui-eks-worker-sg 설명: EKS Worker Node 보안 그룹 Inbound Rules: - Type: All Traffic Port: All Source: Same Security Group 설명: 워커 노드간 통신 - Type: Custom TCP Port: 1025-65535 Source: Control Plane Security Group 설명: Control Plane에서 kubelet 통신 - Type: HTTP Port: 80 Source: ALB Security Group 설명: 로드밸런서에서 애플리케이션 접근 - Type: Custom TCP Port: 30000-32767 Source: ALB Security Group 설명: NodePort 서비스 접근 Outbound Rules: - Type: All Traffic Port: All Destination: 0.0.0.0/0 설명: 모든 아웃바운드 트래픽 허용 Application Load Balancer Security Group 이름: openwebui-alb-sg 설명: ALB 보안 그룹 Inbound Rules: - Type: HTTP Port: 80 Source: 0.0.0.0/0 설명: 인터넷에서 HTTP 접근 - Type: HTTPS Port: 443 Source: 0.0.0.0/0 설명: 인터넷에서 HTTPS 접근 Outbound Rules: - Type: Custom TCP Port: 80 Destination: Worker Node Security Group 설명: 워커 노드로 트래픽 전달 - Type: Custom TCP Port: 30000-32767 Destination: Worker Node Security Group 설명: NodePort 서비스 접근 ⚙️ EKS 클러스터 설계 클러스터 기본 설정 클러스터 설정: 이름: openwebui-eks-dev 버전: 1.28 엔드포인트 액세스: Public: true Private: true 로깅: - api - audit - authenticator - controllerManager - scheduler Node Group 설계 Primary Node Group 이름: openwebui-primary-nodes 인스턴스 타입: t3.medium 스케일링: 최소: 2 최대: 4 원하는 용량: 2 디스크: 크기: 20GB 타입: gp3 레이블: environment: dev nodegroup: primary Taints: 없음 Spot Instance Node Group (비용 절약용) 이름: openwebui-spot-nodes 인스턴스 타입: - t3.medium - t3.large - m5.large 구매 옵션: Spot Instance 스케일링: 최소: 0 최대: 3 원하는 용량: 1 레이블: environment: dev nodegroup: spot Taints: - Key: spot Value: \"true\" Effect: NoSchedule Add-ons 설정 필수 Add-ons: - vpc-cni (네트워킹) - coredns (DNS) - kube-proxy (네트워크 프록시) 추가 Add-ons: - aws-load-balancer-controller - ebs-csi-driver - cluster-autoscaler 🏷️ 리소스 명명 규칙 명명 규칙 표준 형식: {project}-{resource-type}-{environment}-{optional-suffix} 예시: VPC: openwebui-vpc-dev Subnet: openwebui-public-subnet-dev-a Security Group: openwebui-eks-sg-dev EKS Cluster: openwebui-eks-dev Node Group: openwebui-primary-nodes-dev Load Balancer: openwebui-alb-dev 태그 전략 모든 리소스 공통 태그: Project: openwebui Environment: dev Owner: team-name ManagedBy: terraform 리소스별 추가 태그: EKS Cluster: kubernetes.io/cluster/openwebui-eks-dev: owned Subnet: kubernetes.io/role/elb: 1 (public subnet) kubernetes.io/role/internal-elb: 1 (private subnet) 💰 비용 계산 및 최적화 예상 월 비용 (서울 리전 기준) 기본 구성 서비스 스펙 월 예상 비용 설명 EKS Control Plane 관리형 서비스 $72 클러스터당 고정 비용 EC2 인스턴스 2x t3.medium $60 워커 노드 (on-demand) EBS 볼륨 40GB gp3 $4 워커 노드 스토리지 NAT Gateway 2개 AZ $64 각 AZ당 $32 Load Balancer ALB $22 기본 요금 + 트래픽 데이터 전송 예상 10GB $1 아웃바운드 트래픽 기타 서비스 ECR, CloudWatch $5 로그, 이미지 저장 총 예상 비용: 월 $228\n비용 최적화 구성 서비스 최적화 방법 절약 비용 비고 EC2 인스턴스 Spot Instance 사용 -$42 70% 할인 NAT Gateway 단일 AZ 사용 -$32 고가용성 일부 포기 EBS 볼륨 gp2 → gp3 전환 -$1 이미 적용됨 최적화된 비용: 월 $153\n비용 알림 설정 CloudWatch 예산 설정 예산 이름: openwebui-monthly-budget 예산 금액: $200 알림 설정: - 80% 도달 시 이메일 알림 - 100% 도달 시 이메일 + SMS 알림 - 120% 예상 시 긴급 알림 비용 태그 전략 비용 추적 태그: CostCenter: openwebui-project Department: engineering Team: devops Environment: dev 🔄 백업 및 재해 복구 계획 백업 전략 Terraform State 백업 S3 버킷 설정: 이름: openwebui-terraform-state-{random-suffix} 버전 관리: 활성화 암호화: AES-256 생명주기 정책: - 90일 후 IA로 전환 - 365일 후 Glacier로 전환 DynamoDB 락 테이블: 이름: terraform-lock Primary Key: LockID 애플리케이션 데이터 백업 EBS 스냅샷: 자동 스냅샷: 매일 오전 3시 보존 기간: 7일 데이터베이스 백업: RDS 자동 백업: 활성화 (향후 사용 시) 백업 보존: 7일 재해 복구 계획 RTO/RPO 목표 RTO (Recovery Time Objective): 4시간 RPO (Recovery Point Objective): 1시간 복구 시나리오: 1. 단일 AZ 장애: 자동 복구 (10분) 2. 전체 클러스터 장애: 수동 복구 (2시간) 3. 리전 장애: 타 리전 복구 (4시간) 복구 절차 1단계: 상황 평가 - 장애 범위 확인 - 영향도 평가 - 복구 전략 결정 2단계: 긴급 조치 - 트래픽 우회 - 알림 발송 - 로그 수집 3단계: 복구 실행 - Terraform으로 인프라 재생성 - 애플리케이션 배포 - 데이터 복구 4단계: 검증 - 기능 테스트 - 성능 확인 - 모니터링 복구 🔍 보안 설계 IAM 권한 설계 EKS Service Role 역할 이름: openwebui-eks-service-role 정책: - AmazonEKSClusterPolicy 신뢰 관계: - eks.amazonaws.com Node Group Instance Role 역할 이름: openwebui-eks-nodegroup-role 정책: - AmazonEKSWorkerNodePolicy - AmazonEKS_CNI_Policy - AmazonEC2ContainerRegistryReadOnly 신뢰 관계: - ec2.amazonaws.com 최소 권한 원칙 개발자 권한: - EKS 클러스터 읽기 전용 - ECR 푸시/풀 - CloudWatch 로그 읽기 운영자 권한: - EKS 클러스터 전체 관리 - EC2 인스턴스 관리 - 모니터링 도구 접근 네트워크 보안 네트워크 ACL Public Subnet ACL: Inbound: - HTTP/HTTPS (80, 443) from 0.0.0.0/0 - SSH (22) from 관리자 IP Outbound: - All traffic to 0.0.0.0/0 Private Subnet ACL: Inbound: - All traffic from VPC CIDR Outbound: - All traffic to 0.0.0.0/0 VPC Flow Logs 설정: 대상: CloudWatch Logs 트래픽 타입: ALL 집계 간격: 1분 로그 그룹: /aws/vpc/flowlogs 보존 기간: 30일 📊 모니터링 및 로깅 설계 CloudWatch 설정 메트릭 수집 EKS 메트릭: - 클러스터 상태 - 노드 리소스 사용률 - 파드 상태 EC2 메트릭: - CPU, 메모리, 네트워크 - 디스크 사용률 - 시스템 로드 로그 수집 로그 그룹: - /aws/eks/openwebui-eks-dev/cluster - /aws/ec2/openwebui - /aws/application/openwebui 보존 기간: 30일 알림 설정 CloudWatch 알람 CPU 사용률: 임계값: 80% 평가 기간: 5분 알림: SNS Topic 메모리 사용률: 임계값: 85% 평가 기간: 5분 알림: SNS Topic 파드 실패: 임계값: 1개 이상 평가 기간: 1분 알림: SNS Topic + Slack ✅ 설계 검증 체크리스트 네트워크 설계 검증 VPC CIDR가 다른 VPC와 겹치지 않는가? 서브넷이 적절히 분할되어 있는가? NAT Gateway가 각 AZ에 배치되어 있는가? 라우팅 테이블이 올바르게 설정되어 있는가? 보안 설계 검증 보안 그룹이 최소 권한으로 설정되어 있는가? IAM 역할이 적절히 분리되어 있는가? 프라이빗 서브넷의 인스턴스가 인터넷에 직접 노출되지 않는가? 로그와 모니터링이 설정되어 있는가? 고가용성 검증 리소스가 다중 AZ에 분산되어 있는가? 자동 스케일링이 설정되어 있는가? 백업 전략이 수립되어 있는가? 장애 복구 절차가 문서화되어 있는가? 비용 최적화 검증 불필요한 리소스가 제거되어 있는가? Spot 인스턴스 사용을 고려했는가? 비용 알림이 설정되어 있는가? 리소스 태그가 적절히 설정되어 있는가? 🚨 주의사항 및 제한사항 개발 환경 제한사항 인스턴스 제한: - 최대 10개 EC2 인스턴스 - 프리티어 혜택 활용 네트워크 제한: - 단일 리전 사용 - 최소한의 NAT Gateway 스토리지 제한: - 기본 EBS 볼륨만 사용 - 백업 보존 기간 단축 운영 환경 고려사항 확장성: - Auto Scaling 그룹 설정 - 로드 밸런서 확장 준비 보안: - WAF 설정 고려 - VPN 연결 고려 모니터링: - 상세 메트릭 수집 - 알림 채널 확장 📚 참고 자료 AWS VPC 설계 모범 사례 Amazon EKS 보안 그룹 EKS 네트워킹 AWS 비용 최적화 ⏭️ 다음 단계 환경 설계가 완료되었다면 다음 문서로 진행하세요:\n[03-terraform-configuration.md] - Terraform으로 인프라 구현 [04-eks-deployment.md] - EKS 클러스터 배포 [05-application-deployment.md] - 애플리케이션 배포 💡 팁: 이 설계 문서는 실제 구현 전에 팀원들과 검토하고 승인받으세요. 한 번 배포된 후에는 변경이 어려운 부분들이 있습니다!\n",
  "wordCount" : "1606",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://8dobibim.github.io/backend/aws-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "8dobibim Tech Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://8dobibim.github.io/" accesskey="h" title="8dobibim Tech Blog (Alt + H)">8dobibim Tech Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://8dobibim.github.io/frontend/" title="🖥 프론트엔드">
                    <span>🖥 프론트엔드</span>
                </a>
            </li>
            <li>
                <a href="https://8dobibim.github.io/backend/" title="💾 백엔드">
                    <span>💾 백엔드</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://8dobibim.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://8dobibim.github.io/backend/">Backend 문서</a></div>
    <h1 class="post-title entry-hint-parent">
      
    </h1>
    <div class="post-meta">8 min&nbsp;·&nbsp;1606 words

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#-aws-%ed%99%98%ea%b2%bd-%ec%84%a4%ec%a0%95-%ea%b0%80%ec%9d%b4%eb%93%9c" aria-label="🏗️ AWS 환경 설정 가이드">🏗️ AWS 환경 설정 가이드</a><ul>
                        
                <li>
                    <a href="#-%ec%84%a4%ec%a0%95-%ec%99%84%eb%a3%8c-%ec%b2%b4%ed%81%ac%eb%a6%ac%ec%8a%a4%ed%8a%b8" aria-label="📋 설정 완료 체크리스트">📋 설정 완료 체크리스트</a></li>
                <li>
                    <a href="#-%ec%a0%84%ec%b2%b4-%ec%95%84%ed%82%a4%ed%85%8d%ec%b2%98-%ea%b0%9c%ec%9a%94" aria-label="🎯 전체 아키텍처 개요">🎯 전체 아키텍처 개요</a><ul>
                        
                <li>
                    <a href="#%ec%8b%9c%ec%8a%a4%ed%85%9c-%ea%b5%ac%ec%84%b1%eb%8f%84" aria-label="시스템 구성도">시스템 구성도</a></li>
                <li>
                    <a href="#%ec%a3%bc%ec%9a%94-%ea%b5%ac%ec%84%b1-%ec%9a%94%ec%86%8c-%ec%84%a4%eb%aa%85" aria-label="주요 구성 요소 설명">주요 구성 요소 설명</a></li></ul>
                </li>
                <li>
                    <a href="#-%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%81%ac-%ec%84%a4%ea%b3%84" aria-label="🌐 네트워크 설계">🌐 네트워크 설계</a><ul>
                        
                <li>
                    <a href="#vpc-%eb%b0%8f-%ec%84%9c%eb%b8%8c%eb%84%b7-%ea%b5%ac%ec%84%b1" aria-label="VPC 및 서브넷 구성">VPC 및 서브넷 구성</a><ul>
                        
                <li>
                    <a href="#%ea%b8%b0%eb%b3%b8-%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%81%ac-%ec%84%a4%ec%a0%95" aria-label="기본 네트워크 설정">기본 네트워크 설정</a></li>
                <li>
                    <a href="#%ec%84%9c%eb%b8%8c%eb%84%b7-%ec%84%a4%ea%b3%84" aria-label="서브넷 설계">서브넷 설계</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%9d%bc%ec%9a%b0%ed%8c%85-%ed%85%8c%ec%9d%b4%eb%b8%94-%ec%84%a4%ea%b3%84" aria-label="라우팅 테이블 설계">라우팅 테이블 설계</a><ul>
                        
                <li>
                    <a href="#public-route-table" aria-label="Public Route Table">Public Route Table</a></li>
                <li>
                    <a href="#private-route-tables" aria-label="Private Route Tables">Private Route Tables</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#-%eb%b3%b4%ec%95%88-%ea%b7%b8%eb%a3%b9-%ec%84%a4%ea%b3%84" aria-label="🔒 보안 그룹 설계">🔒 보안 그룹 설계</a><ul>
                        
                <li>
                    <a href="#eks-%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0-%eb%b3%b4%ec%95%88-%ea%b7%b8%eb%a3%b9" aria-label="EKS 클러스터 보안 그룹">EKS 클러스터 보안 그룹</a><ul>
                        
                <li>
                    <a href="#control-plane-security-group" aria-label="Control Plane Security Group">Control Plane Security Group</a></li>
                <li>
                    <a href="#worker-node-security-group" aria-label="Worker Node Security Group">Worker Node Security Group</a></li>
                <li>
                    <a href="#application-load-balancer-security-group" aria-label="Application Load Balancer Security Group">Application Load Balancer Security Group</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#-eks-%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0-%ec%84%a4%ea%b3%84" aria-label="⚙️ EKS 클러스터 설계">⚙️ EKS 클러스터 설계</a><ul>
                        
                <li>
                    <a href="#%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0-%ea%b8%b0%eb%b3%b8-%ec%84%a4%ec%a0%95" aria-label="클러스터 기본 설정">클러스터 기본 설정</a></li>
                <li>
                    <a href="#node-group-%ec%84%a4%ea%b3%84" aria-label="Node Group 설계">Node Group 설계</a><ul>
                        
                <li>
                    <a href="#primary-node-group" aria-label="Primary Node Group">Primary Node Group</a></li>
                <li>
                    <a href="#spot-instance-node-group-%eb%b9%84%ec%9a%a9-%ec%a0%88%ec%95%bd%ec%9a%a9" aria-label="Spot Instance Node Group (비용 절약용)">Spot Instance Node Group (비용 절약용)</a></li></ul>
                </li>
                <li>
                    <a href="#add-ons-%ec%84%a4%ec%a0%95" aria-label="Add-ons 설정">Add-ons 설정</a></li></ul>
                </li>
                <li>
                    <a href="#-%eb%a6%ac%ec%86%8c%ec%8a%a4-%eb%aa%85%eb%aa%85-%ea%b7%9c%ec%b9%99" aria-label="🏷️ 리소스 명명 규칙">🏷️ 리소스 명명 규칙</a><ul>
                        
                <li>
                    <a href="#%eb%aa%85%eb%aa%85-%ea%b7%9c%ec%b9%99-%ed%91%9c%ec%a4%80" aria-label="명명 규칙 표준">명명 규칙 표준</a></li>
                <li>
                    <a href="#%ed%83%9c%ea%b7%b8-%ec%a0%84%eb%9e%b5" aria-label="태그 전략">태그 전략</a></li></ul>
                </li>
                <li>
                    <a href="#-%eb%b9%84%ec%9a%a9-%ea%b3%84%ec%82%b0-%eb%b0%8f-%ec%b5%9c%ec%a0%81%ed%99%94" aria-label="💰 비용 계산 및 최적화">💰 비용 계산 및 최적화</a><ul>
                        
                <li>
                    <a href="#%ec%98%88%ec%83%81-%ec%9b%94-%eb%b9%84%ec%9a%a9-%ec%84%9c%ec%9a%b8-%eb%a6%ac%ec%a0%84-%ea%b8%b0%ec%a4%80" aria-label="예상 월 비용 (서울 리전 기준)">예상 월 비용 (서울 리전 기준)</a><ul>
                        
                <li>
                    <a href="#%ea%b8%b0%eb%b3%b8-%ea%b5%ac%ec%84%b1" aria-label="기본 구성">기본 구성</a></li>
                <li>
                    <a href="#%eb%b9%84%ec%9a%a9-%ec%b5%9c%ec%a0%81%ed%99%94-%ea%b5%ac%ec%84%b1" aria-label="비용 최적화 구성">비용 최적화 구성</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%b9%84%ec%9a%a9-%ec%95%8c%eb%a6%bc-%ec%84%a4%ec%a0%95" aria-label="비용 알림 설정">비용 알림 설정</a><ul>
                        
                <li>
                    <a href="#cloudwatch-%ec%98%88%ec%82%b0-%ec%84%a4%ec%a0%95" aria-label="CloudWatch 예산 설정">CloudWatch 예산 설정</a></li>
                <li>
                    <a href="#%eb%b9%84%ec%9a%a9-%ed%83%9c%ea%b7%b8-%ec%a0%84%eb%9e%b5" aria-label="비용 태그 전략">비용 태그 전략</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#-%eb%b0%b1%ec%97%85-%eb%b0%8f-%ec%9e%ac%ed%95%b4-%eb%b3%b5%ea%b5%ac-%ea%b3%84%ed%9a%8d" aria-label="🔄 백업 및 재해 복구 계획">🔄 백업 및 재해 복구 계획</a><ul>
                        
                <li>
                    <a href="#%eb%b0%b1%ec%97%85-%ec%a0%84%eb%9e%b5" aria-label="백업 전략">백업 전략</a><ul>
                        
                <li>
                    <a href="#terraform-state-%eb%b0%b1%ec%97%85" aria-label="Terraform State 백업">Terraform State 백업</a></li>
                <li>
                    <a href="#%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98-%eb%8d%b0%ec%9d%b4%ed%84%b0-%eb%b0%b1%ec%97%85" aria-label="애플리케이션 데이터 백업">애플리케이션 데이터 백업</a></li></ul>
                </li>
                <li>
                    <a href="#%ec%9e%ac%ed%95%b4-%eb%b3%b5%ea%b5%ac-%ea%b3%84%ed%9a%8d" aria-label="재해 복구 계획">재해 복구 계획</a><ul>
                        
                <li>
                    <a href="#rtorpo-%eb%aa%a9%ed%91%9c" aria-label="RTO/RPO 목표">RTO/RPO 목표</a></li>
                <li>
                    <a href="#%eb%b3%b5%ea%b5%ac-%ec%a0%88%ec%b0%a8" aria-label="복구 절차">복구 절차</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#-%eb%b3%b4%ec%95%88-%ec%84%a4%ea%b3%84" aria-label="🔍 보안 설계">🔍 보안 설계</a><ul>
                        
                <li>
                    <a href="#iam-%ea%b6%8c%ed%95%9c-%ec%84%a4%ea%b3%84" aria-label="IAM 권한 설계">IAM 권한 설계</a><ul>
                        
                <li>
                    <a href="#eks-service-role" aria-label="EKS Service Role">EKS Service Role</a></li>
                <li>
                    <a href="#node-group-instance-role" aria-label="Node Group Instance Role">Node Group Instance Role</a></li>
                <li>
                    <a href="#%ec%b5%9c%ec%86%8c-%ea%b6%8c%ed%95%9c-%ec%9b%90%ec%b9%99" aria-label="최소 권한 원칙">최소 권한 원칙</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%81%ac-%eb%b3%b4%ec%95%88" aria-label="네트워크 보안">네트워크 보안</a><ul>
                        
                <li>
                    <a href="#%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%81%ac-acl" aria-label="네트워크 ACL">네트워크 ACL</a></li>
                <li>
                    <a href="#vpc-flow-logs" aria-label="VPC Flow Logs">VPC Flow Logs</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#-%eb%aa%a8%eb%8b%88%ed%84%b0%eb%a7%81-%eb%b0%8f-%eb%a1%9c%ea%b9%85-%ec%84%a4%ea%b3%84" aria-label="📊 모니터링 및 로깅 설계">📊 모니터링 및 로깅 설계</a><ul>
                        
                <li>
                    <a href="#cloudwatch-%ec%84%a4%ec%a0%95" aria-label="CloudWatch 설정">CloudWatch 설정</a><ul>
                        
                <li>
                    <a href="#%eb%a9%94%ed%8a%b8%eb%a6%ad-%ec%88%98%ec%a7%91" aria-label="메트릭 수집">메트릭 수집</a></li>
                <li>
                    <a href="#%eb%a1%9c%ea%b7%b8-%ec%88%98%ec%a7%91" aria-label="로그 수집">로그 수집</a></li></ul>
                </li>
                <li>
                    <a href="#%ec%95%8c%eb%a6%bc-%ec%84%a4%ec%a0%95" aria-label="알림 설정">알림 설정</a><ul>
                        
                <li>
                    <a href="#cloudwatch-%ec%95%8c%eb%9e%8c" aria-label="CloudWatch 알람">CloudWatch 알람</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#-%ec%84%a4%ea%b3%84-%ea%b2%80%ec%a6%9d-%ec%b2%b4%ed%81%ac%eb%a6%ac%ec%8a%a4%ed%8a%b8" aria-label="✅ 설계 검증 체크리스트">✅ 설계 검증 체크리스트</a><ul>
                        
                <li>
                    <a href="#%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%81%ac-%ec%84%a4%ea%b3%84-%ea%b2%80%ec%a6%9d" aria-label="네트워크 설계 검증">네트워크 설계 검증</a></li>
                <li>
                    <a href="#%eb%b3%b4%ec%95%88-%ec%84%a4%ea%b3%84-%ea%b2%80%ec%a6%9d" aria-label="보안 설계 검증">보안 설계 검증</a></li>
                <li>
                    <a href="#%ea%b3%a0%ea%b0%80%ec%9a%a9%ec%84%b1-%ea%b2%80%ec%a6%9d" aria-label="고가용성 검증">고가용성 검증</a></li>
                <li>
                    <a href="#%eb%b9%84%ec%9a%a9-%ec%b5%9c%ec%a0%81%ed%99%94-%ea%b2%80%ec%a6%9d" aria-label="비용 최적화 검증">비용 최적화 검증</a></li></ul>
                </li>
                <li>
                    <a href="#-%ec%a3%bc%ec%9d%98%ec%82%ac%ed%95%ad-%eb%b0%8f-%ec%a0%9c%ed%95%9c%ec%82%ac%ed%95%ad" aria-label="🚨 주의사항 및 제한사항">🚨 주의사항 및 제한사항</a><ul>
                        
                <li>
                    <a href="#%ea%b0%9c%eb%b0%9c-%ed%99%98%ea%b2%bd-%ec%a0%9c%ed%95%9c%ec%82%ac%ed%95%ad" aria-label="개발 환경 제한사항">개발 환경 제한사항</a></li>
                <li>
                    <a href="#%ec%9a%b4%ec%98%81-%ed%99%98%ea%b2%bd-%ea%b3%a0%eb%a0%a4%ec%82%ac%ed%95%ad" aria-label="운영 환경 고려사항">운영 환경 고려사항</a></li></ul>
                </li>
                <li>
                    <a href="#-%ec%b0%b8%ea%b3%a0-%ec%9e%90%eb%a3%8c" aria-label="📚 참고 자료">📚 참고 자료</a></li>
                <li>
                    <a href="#-%eb%8b%a4%ec%9d%8c-%eb%8b%a8%ea%b3%84" aria-label="⏭️ 다음 단계">⏭️ 다음 단계</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="-aws-환경-설정-가이드">🏗️ AWS 환경 설정 가이드<a hidden class="anchor" aria-hidden="true" href="#-aws-환경-설정-가이드">#</a></h1>
<blockquote>
<p><strong>⏱️ 예상 소요시간</strong>: 약 30-45분 (설계 및 계획)<br>
<strong>💡 난이도</strong>: 초급-중급<br>
<strong>📋 목표</strong>: OpenWebUI 배포를 위한 AWS 인프라 설계 및 구성 계획을 수립합니다.</p></blockquote>
<hr>
<h2 id="-설정-완료-체크리스트">📋 설정 완료 체크리스트<a hidden class="anchor" aria-hidden="true" href="#-설정-완료-체크리스트">#</a></h2>
<ul>
<li><input disabled="" type="checkbox"> 네트워크 아키텍처 설계 완료</li>
<li><input disabled="" type="checkbox"> 리소스 명명 규칙 정의</li>
<li><input disabled="" type="checkbox"> 보안 그룹 계획 수립</li>
<li><input disabled="" type="checkbox"> EKS 클러스터 구성 계획</li>
<li><input disabled="" type="checkbox"> 비용 계산 및 예산 설정</li>
<li><input disabled="" type="checkbox"> 백업 및 재해 복구 계획</li>
</ul>
<hr>
<h2 id="-전체-아키텍처-개요">🎯 전체 아키텍처 개요<a hidden class="anchor" aria-hidden="true" href="#-전체-아키텍처-개요">#</a></h2>
<h3 id="시스템-구성도">시스템 구성도<a hidden class="anchor" aria-hidden="true" href="#시스템-구성도">#</a></h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                        AWS Cloud                           │
│  ┌─────────────────────────────────────────────────────────┐│
│  │                  VPC (10.0.0.0/16)                     ││
│  │  ┌─────────────────────┐  ┌─────────────────────────────┐││
│  │  │   Public Subnet A   │  │    Public Subnet B         │││
│  │  │   (10.0.1.0/24)     │  │    (10.0.2.0/24)          │││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │  NAT Gateway A  ││  │  │   NAT Gateway B         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │ Internet Gateway││  │  │   Load Balancer         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  └─────────────────────┘  └─────────────────────────────┘││
│  │  ┌─────────────────────┐  ┌─────────────────────────────┐││
│  │  │  Private Subnet A   │  │   Private Subnet B          │││
│  │  │   (10.0.10.0/24)    │  │   (10.0.20.0/24)           │││
│  │  │  ┌─────────────────┐│  │  ┌─────────────────────────┐│││
│  │  │  │ EKS Node Group A││  │  │  EKS Node Group B       ││││
│  │  │  │                 ││  │  │                         ││││
│  │  │  │ OpenWebUI Pods  ││  │  │   LiteLLM Pods          ││││
│  │  │  │ Monitoring Pods ││  │  │   Database Pods         ││││
│  │  │  └─────────────────┘│  │  └─────────────────────────┘│││
│  │  └─────────────────────┘  └─────────────────────────────┘││
│  │                                                         ││
│  │  ┌─────────────────────────────────────────────────────┐││
│  │  │                  EKS Control Plane                  ││
│  │  │                 (AWS Managed)                       ││
│  │  └─────────────────────────────────────────────────────┘││
│  └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘

외부 연결:
- ECR (컨테이너 이미지 저장소)
- S3 (Terraform State, 백업)
- DynamoDB (Terraform Lock)
- CloudWatch (로깅 및 모니터링)
</code></pre><h3 id="주요-구성-요소-설명">주요 구성 요소 설명<a hidden class="anchor" aria-hidden="true" href="#주요-구성-요소-설명">#</a></h3>
<table>
  <thead>
      <tr>
          <th>구성 요소</th>
          <th>목적</th>
          <th>위치</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>VPC</strong></td>
          <td>격리된 네트워크 환경</td>
          <td>ap-northeast-2</td>
      </tr>
      <tr>
          <td><strong>Public Subnet</strong></td>
          <td>인터넷 게이트웨이, 로드밸런서</td>
          <td>2개 AZ</td>
      </tr>
      <tr>
          <td><strong>Private Subnet</strong></td>
          <td>EKS 워커 노드, 애플리케이션</td>
          <td>2개 AZ</td>
      </tr>
      <tr>
          <td><strong>EKS Cluster</strong></td>
          <td>Kubernetes 관리형 서비스</td>
          <td>Multi-AZ</td>
      </tr>
      <tr>
          <td><strong>Node Groups</strong></td>
          <td>EC2 인스턴스 그룹</td>
          <td>Private Subnet</td>
      </tr>
      <tr>
          <td><strong>ALB</strong></td>
          <td>애플리케이션 로드밸런서</td>
          <td>Public Subnet</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-네트워크-설계">🌐 네트워크 설계<a hidden class="anchor" aria-hidden="true" href="#-네트워크-설계">#</a></h2>
<h3 id="vpc-및-서브넷-구성">VPC 및 서브넷 구성<a hidden class="anchor" aria-hidden="true" href="#vpc-및-서브넷-구성">#</a></h3>
<h4 id="기본-네트워크-설정">기본 네트워크 설정<a hidden class="anchor" aria-hidden="true" href="#기본-네트워크-설정">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">VPC 설정</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">CIDR</span>: <span style="color:#ae81ff">10.0.0.0</span><span style="color:#ae81ff">/16</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Region</span>: <span style="color:#ae81ff">ap-northeast-2 (서울)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">DNS Resolution</span>: <span style="color:#ae81ff">Enabled</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">DNS Hostnames</span>: <span style="color:#ae81ff">Enabled</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">가용 영역</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ap-northeast-2a</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ap-northeast-2c</span>
</span></span></code></pre></div><h4 id="서브넷-설계">서브넷 설계<a hidden class="anchor" aria-hidden="true" href="#서브넷-설계">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">Public Subnets</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Public-A</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">CIDR</span>: <span style="color:#ae81ff">10.0.1.0</span><span style="color:#ae81ff">/24</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">AZ</span>: <span style="color:#ae81ff">ap-northeast-2a</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">용도</span>: <span style="color:#ae81ff">NAT Gateway, Load Balancer</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Public-B</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">CIDR</span>: <span style="color:#ae81ff">10.0.2.0</span><span style="color:#ae81ff">/24</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">AZ</span>: <span style="color:#ae81ff">ap-northeast-2c</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">용도</span>: <span style="color:#ae81ff">NAT Gateway, Load Balancer</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Private Subnets</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Private-A</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">CIDR</span>: <span style="color:#ae81ff">10.0.10.0</span><span style="color:#ae81ff">/24</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">AZ</span>: <span style="color:#ae81ff">ap-northeast-2a</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">용도</span>: <span style="color:#ae81ff">EKS Worker Nodes</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Private-B</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">CIDR</span>: <span style="color:#ae81ff">10.0.20.0</span><span style="color:#ae81ff">/24</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">AZ</span>: <span style="color:#ae81ff">ap-northeast-2c</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">용도</span>: <span style="color:#ae81ff">EKS Worker Nodes</span>
</span></span></code></pre></div><h3 id="라우팅-테이블-설계">라우팅 테이블 설계<a hidden class="anchor" aria-hidden="true" href="#라우팅-테이블-설계">#</a></h3>
<h4 id="public-route-table">Public Route Table<a hidden class="anchor" aria-hidden="true" href="#public-route-table">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">대상</span>: <span style="color:#ae81ff">0.0.0.0</span><span style="color:#ae81ff">/0</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">게이트웨이</span>: <span style="color:#ae81ff">Internet Gateway</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">연결된 서브넷</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">Public Subnet A</span>
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">Public Subnet B</span>
</span></span></code></pre></div><h4 id="private-route-tables">Private Route Tables<a hidden class="anchor" aria-hidden="true" href="#private-route-tables">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">Private Route Table A</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">대상</span>: <span style="color:#ae81ff">0.0.0.0</span><span style="color:#ae81ff">/0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">게이트웨이</span>: <span style="color:#ae81ff">NAT Gateway A</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">연결 서브넷</span>: <span style="color:#ae81ff">Private Subnet A</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Private Route Table B</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">대상</span>: <span style="color:#ae81ff">0.0.0.0</span><span style="color:#ae81ff">/0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">게이트웨이</span>: <span style="color:#ae81ff">NAT Gateway B</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">연결 서브넷</span>: <span style="color:#ae81ff">Private Subnet B</span>
</span></span></code></pre></div><hr>
<h2 id="-보안-그룹-설계">🔒 보안 그룹 설계<a hidden class="anchor" aria-hidden="true" href="#-보안-그룹-설계">#</a></h2>
<h3 id="eks-클러스터-보안-그룹">EKS 클러스터 보안 그룹<a hidden class="anchor" aria-hidden="true" href="#eks-클러스터-보안-그룹">#</a></h3>
<h4 id="control-plane-security-group">Control Plane Security Group<a hidden class="anchor" aria-hidden="true" href="#control-plane-security-group">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">이름</span>: <span style="color:#ae81ff">openwebui-eks-control-plane-sg</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">설명</span>: <span style="color:#ae81ff">EKS Control Plane 보안 그룹</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Inbound Rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">HTTPS</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">443</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Source</span>: <span style="color:#ae81ff">Worker Node Security Group</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">Worker 노드에서 API 서버 접근</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Outbound Rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">All Traffic</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">All</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Destination</span>: <span style="color:#ae81ff">0.0.0.0</span><span style="color:#ae81ff">/0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">모든 아웃바운드 트래픽 허용</span>
</span></span></code></pre></div><h4 id="worker-node-security-group">Worker Node Security Group<a hidden class="anchor" aria-hidden="true" href="#worker-node-security-group">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">이름</span>: <span style="color:#ae81ff">openwebui-eks-worker-sg</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">설명</span>: <span style="color:#ae81ff">EKS Worker Node 보안 그룹</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Inbound Rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">All Traffic</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">All</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Source</span>: <span style="color:#ae81ff">Same Security Group</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">워커 노드간 통신</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">Custom TCP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">1025-65535</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Source</span>: <span style="color:#ae81ff">Control Plane Security Group</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">Control Plane에서 kubelet 통신</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">HTTP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Source</span>: <span style="color:#ae81ff">ALB Security Group</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">로드밸런서에서 애플리케이션 접근</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">Custom TCP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">30000-32767</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Source</span>: <span style="color:#ae81ff">ALB Security Group</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">NodePort 서비스 접근</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Outbound Rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">All Traffic</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">All</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Destination</span>: <span style="color:#ae81ff">0.0.0.0</span><span style="color:#ae81ff">/0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">모든 아웃바운드 트래픽 허용</span>
</span></span></code></pre></div><h4 id="application-load-balancer-security-group">Application Load Balancer Security Group<a hidden class="anchor" aria-hidden="true" href="#application-load-balancer-security-group">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">이름</span>: <span style="color:#ae81ff">openwebui-alb-sg</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">설명</span>: <span style="color:#ae81ff">ALB 보안 그룹</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Inbound Rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">HTTP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Source</span>: <span style="color:#ae81ff">0.0.0.0</span><span style="color:#ae81ff">/0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">인터넷에서 HTTP 접근</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">HTTPS</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">443</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Source</span>: <span style="color:#ae81ff">0.0.0.0</span><span style="color:#ae81ff">/0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">인터넷에서 HTTPS 접근</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Outbound Rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">Custom TCP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Destination</span>: <span style="color:#ae81ff">Worker Node Security Group</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">워커 노드로 트래픽 전달</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Type</span>: <span style="color:#ae81ff">Custom TCP</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Port</span>: <span style="color:#ae81ff">30000-32767</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Destination</span>: <span style="color:#ae81ff">Worker Node Security Group</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">설명</span>: <span style="color:#ae81ff">NodePort 서비스 접근</span>
</span></span></code></pre></div><hr>
<h2 id="-eks-클러스터-설계">⚙️ EKS 클러스터 설계<a hidden class="anchor" aria-hidden="true" href="#-eks-클러스터-설계">#</a></h2>
<h3 id="클러스터-기본-설정">클러스터 기본 설정<a hidden class="anchor" aria-hidden="true" href="#클러스터-기본-설정">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">클러스터 설정</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">이름</span>: <span style="color:#ae81ff">openwebui-eks-dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">버전</span>: <span style="color:#ae81ff">1.28</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">엔드포인트 액세스</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Public</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Private</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">로깅</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">api</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">audit</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">authenticator</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">controllerManager</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">scheduler</span>
</span></span></code></pre></div><h3 id="node-group-설계">Node Group 설계<a hidden class="anchor" aria-hidden="true" href="#node-group-설계">#</a></h3>
<h4 id="primary-node-group">Primary Node Group<a hidden class="anchor" aria-hidden="true" href="#primary-node-group">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">이름</span>: <span style="color:#ae81ff">openwebui-primary-nodes</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">인스턴스 타입</span>: <span style="color:#ae81ff">t3.medium</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">스케일링</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">최소</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">최대</span>: <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">원하는 용량</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">디스크</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">크기</span>: <span style="color:#ae81ff">20GB</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">타입</span>: <span style="color:#ae81ff">gp3</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">레이블</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">environment</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nodegroup</span>: <span style="color:#ae81ff">primary</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">Taints</span>: <span style="color:#ae81ff">없음</span>
</span></span></code></pre></div><h4 id="spot-instance-node-group-비용-절약용">Spot Instance Node Group (비용 절약용)<a hidden class="anchor" aria-hidden="true" href="#spot-instance-node-group-비용-절약용">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">이름</span>: <span style="color:#ae81ff">openwebui-spot-nodes</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">인스턴스 타입</span>: 
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">t3.medium</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">t3.large</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">m5.large</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">구매 옵션</span>: <span style="color:#ae81ff">Spot Instance</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">스케일링</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">최소</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">최대</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">원하는 용량</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">레이블</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">environment</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nodegroup</span>: <span style="color:#ae81ff">spot</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">Taints</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">Key</span>: <span style="color:#ae81ff">spot</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Value</span>: <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">Effect</span>: <span style="color:#ae81ff">NoSchedule</span>
</span></span></code></pre></div><h3 id="add-ons-설정">Add-ons 설정<a hidden class="anchor" aria-hidden="true" href="#add-ons-설정">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">필수 Add-ons</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">vpc-cni (네트워킹)</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">coredns (DNS)</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">kube-proxy (네트워크 프록시)</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">추가 Add-ons</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">aws-load-balancer-controller</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ebs-csi-driver</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">cluster-autoscaler</span>
</span></span></code></pre></div><hr>
<h2 id="-리소스-명명-규칙">🏷️ 리소스 명명 규칙<a hidden class="anchor" aria-hidden="true" href="#-리소스-명명-규칙">#</a></h2>
<h3 id="명명-규칙-표준">명명 규칙 표준<a hidden class="anchor" aria-hidden="true" href="#명명-규칙-표준">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">형식</span>: {<span style="color:#ae81ff">project}-{resource-type}-{environment}-{optional-suffix}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">예시</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VPC</span>: <span style="color:#ae81ff">openwebui-vpc-dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Subnet</span>: <span style="color:#ae81ff">openwebui-public-subnet-dev-a</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Security Group</span>: <span style="color:#ae81ff">openwebui-eks-sg-dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">EKS Cluster</span>: <span style="color:#ae81ff">openwebui-eks-dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Node Group</span>: <span style="color:#ae81ff">openwebui-primary-nodes-dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Load Balancer</span>: <span style="color:#ae81ff">openwebui-alb-dev</span>
</span></span></code></pre></div><h3 id="태그-전략">태그 전략<a hidden class="anchor" aria-hidden="true" href="#태그-전략">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">모든 리소스 공통 태그</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Project</span>: <span style="color:#ae81ff">openwebui</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Environment</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Owner</span>: <span style="color:#ae81ff">team-name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ManagedBy</span>: <span style="color:#ae81ff">terraform</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">리소스별 추가 태그</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">EKS Cluster</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kubernetes.io/cluster/openwebui-eks-dev</span>: <span style="color:#ae81ff">owned</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Subnet</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kubernetes.io/role/elb</span>: <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">(public subnet)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kubernetes.io/role/internal-elb</span>: <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">(private subnet)</span>
</span></span></code></pre></div><hr>
<h2 id="-비용-계산-및-최적화">💰 비용 계산 및 최적화<a hidden class="anchor" aria-hidden="true" href="#-비용-계산-및-최적화">#</a></h2>
<h3 id="예상-월-비용-서울-리전-기준">예상 월 비용 (서울 리전 기준)<a hidden class="anchor" aria-hidden="true" href="#예상-월-비용-서울-리전-기준">#</a></h3>
<h4 id="기본-구성">기본 구성<a hidden class="anchor" aria-hidden="true" href="#기본-구성">#</a></h4>
<table>
  <thead>
      <tr>
          <th>서비스</th>
          <th>스펙</th>
          <th>월 예상 비용</th>
          <th>설명</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>EKS Control Plane</strong></td>
          <td>관리형 서비스</td>
          <td>$72</td>
          <td>클러스터당 고정 비용</td>
      </tr>
      <tr>
          <td><strong>EC2 인스턴스</strong></td>
          <td>2x t3.medium</td>
          <td>$60</td>
          <td>워커 노드 (on-demand)</td>
      </tr>
      <tr>
          <td><strong>EBS 볼륨</strong></td>
          <td>40GB gp3</td>
          <td>$4</td>
          <td>워커 노드 스토리지</td>
      </tr>
      <tr>
          <td><strong>NAT Gateway</strong></td>
          <td>2개 AZ</td>
          <td>$64</td>
          <td>각 AZ당 $32</td>
      </tr>
      <tr>
          <td><strong>Load Balancer</strong></td>
          <td>ALB</td>
          <td>$22</td>
          <td>기본 요금 + 트래픽</td>
      </tr>
      <tr>
          <td><strong>데이터 전송</strong></td>
          <td>예상 10GB</td>
          <td>$1</td>
          <td>아웃바운드 트래픽</td>
      </tr>
      <tr>
          <td><strong>기타 서비스</strong></td>
          <td>ECR, CloudWatch</td>
          <td>$5</td>
          <td>로그, 이미지 저장</td>
      </tr>
  </tbody>
</table>
<p><strong>총 예상 비용: 월 $228</strong></p>
<h4 id="비용-최적화-구성">비용 최적화 구성<a hidden class="anchor" aria-hidden="true" href="#비용-최적화-구성">#</a></h4>
<table>
  <thead>
      <tr>
          <th>서비스</th>
          <th>최적화 방법</th>
          <th>절약 비용</th>
          <th>비고</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>EC2 인스턴스</strong></td>
          <td>Spot Instance 사용</td>
          <td>-$42</td>
          <td>70% 할인</td>
      </tr>
      <tr>
          <td><strong>NAT Gateway</strong></td>
          <td>단일 AZ 사용</td>
          <td>-$32</td>
          <td>고가용성 일부 포기</td>
      </tr>
      <tr>
          <td><strong>EBS 볼륨</strong></td>
          <td>gp2 → gp3 전환</td>
          <td>-$1</td>
          <td>이미 적용됨</td>
      </tr>
  </tbody>
</table>
<p><strong>최적화된 비용: 월 $153</strong></p>
<h3 id="비용-알림-설정">비용 알림 설정<a hidden class="anchor" aria-hidden="true" href="#비용-알림-설정">#</a></h3>
<h4 id="cloudwatch-예산-설정">CloudWatch 예산 설정<a hidden class="anchor" aria-hidden="true" href="#cloudwatch-예산-설정">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">예산 이름</span>: <span style="color:#ae81ff">openwebui-monthly-budget</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">예산 금액</span>: <span style="color:#ae81ff">$200</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">알림 설정</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">80</span><span style="color:#ae81ff">% 도달 시 이메일 알림</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">100</span><span style="color:#ae81ff">% 도달 시 이메일 + SMS 알림</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">120</span><span style="color:#ae81ff">% 예상 시 긴급 알림</span>
</span></span></code></pre></div><h4 id="비용-태그-전략">비용 태그 전략<a hidden class="anchor" aria-hidden="true" href="#비용-태그-전략">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">비용 추적 태그</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">CostCenter</span>: <span style="color:#ae81ff">openwebui-project</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Department</span>: <span style="color:#ae81ff">engineering</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Team</span>: <span style="color:#ae81ff">devops</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Environment</span>: <span style="color:#ae81ff">dev</span>
</span></span></code></pre></div><hr>
<h2 id="-백업-및-재해-복구-계획">🔄 백업 및 재해 복구 계획<a hidden class="anchor" aria-hidden="true" href="#-백업-및-재해-복구-계획">#</a></h2>
<h3 id="백업-전략">백업 전략<a hidden class="anchor" aria-hidden="true" href="#백업-전략">#</a></h3>
<h4 id="terraform-state-백업">Terraform State 백업<a hidden class="anchor" aria-hidden="true" href="#terraform-state-백업">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">S3 버킷 설정</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">이름</span>: <span style="color:#ae81ff">openwebui-terraform-state-{random-suffix}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">버전 관리</span>: <span style="color:#ae81ff">활성화</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">암호화</span>: <span style="color:#ae81ff">AES-256</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">생명주기 정책</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">90일 후 IA로 전환</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">365일 후 Glacier로 전환</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">DynamoDB 락 테이블</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">이름</span>: <span style="color:#ae81ff">terraform-lock</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Primary Key</span>: <span style="color:#ae81ff">LockID</span>
</span></span></code></pre></div><h4 id="애플리케이션-데이터-백업">애플리케이션 데이터 백업<a hidden class="anchor" aria-hidden="true" href="#애플리케이션-데이터-백업">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">EBS 스냅샷</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">자동 스냅샷</span>: <span style="color:#ae81ff">매일 오전 3시</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">보존 기간</span>: <span style="color:#ae81ff">7일</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">데이터베이스 백업</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">RDS 자동 백업</span>: <span style="color:#ae81ff">활성화 (향후 사용 시)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">백업 보존</span>: <span style="color:#ae81ff">7일</span>
</span></span></code></pre></div><h3 id="재해-복구-계획">재해 복구 계획<a hidden class="anchor" aria-hidden="true" href="#재해-복구-계획">#</a></h3>
<h4 id="rtorpo-목표">RTO/RPO 목표<a hidden class="anchor" aria-hidden="true" href="#rtorpo-목표">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">RTO (Recovery Time Objective)</span>: <span style="color:#ae81ff">4시간</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">RPO (Recovery Point Objective)</span>: <span style="color:#ae81ff">1시간</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">복구 시나리오</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">1. 단일 AZ 장애</span>: <span style="color:#ae81ff">자동 복구 (10분)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">2. 전체 클러스터 장애</span>: <span style="color:#ae81ff">수동 복구 (2시간)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">3. 리전 장애</span>: <span style="color:#ae81ff">타 리전 복구 (4시간)</span>
</span></span></code></pre></div><h4 id="복구-절차">복구 절차<a hidden class="anchor" aria-hidden="true" href="#복구-절차">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">1단계</span>: <span style="color:#ae81ff">상황 평가</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">장애 범위 확인</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">영향도 평가</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">복구 전략 결정</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">2단계</span>: <span style="color:#ae81ff">긴급 조치</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">트래픽 우회</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">알림 발송</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">로그 수집</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">3단계</span>: <span style="color:#ae81ff">복구 실행</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Terraform으로 인프라 재생성</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">애플리케이션 배포</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">데이터 복구</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">4단계</span>: <span style="color:#ae81ff">검증</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">기능 테스트</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">성능 확인</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">모니터링 복구</span>
</span></span></code></pre></div><hr>
<h2 id="-보안-설계">🔍 보안 설계<a hidden class="anchor" aria-hidden="true" href="#-보안-설계">#</a></h2>
<h3 id="iam-권한-설계">IAM 권한 설계<a hidden class="anchor" aria-hidden="true" href="#iam-권한-설계">#</a></h3>
<h4 id="eks-service-role">EKS Service Role<a hidden class="anchor" aria-hidden="true" href="#eks-service-role">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">역할 이름</span>: <span style="color:#ae81ff">openwebui-eks-service-role</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">정책</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">AmazonEKSClusterPolicy</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">신뢰 관계</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">eks.amazonaws.com</span>
</span></span></code></pre></div><h4 id="node-group-instance-role">Node Group Instance Role<a hidden class="anchor" aria-hidden="true" href="#node-group-instance-role">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">역할 이름</span>: <span style="color:#ae81ff">openwebui-eks-nodegroup-role</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">정책</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">AmazonEKSWorkerNodePolicy</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">AmazonEKS_CNI_Policy</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">AmazonEC2ContainerRegistryReadOnly</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">신뢰 관계</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ec2.amazonaws.com</span>
</span></span></code></pre></div><h4 id="최소-권한-원칙">최소 권한 원칙<a hidden class="anchor" aria-hidden="true" href="#최소-권한-원칙">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">개발자 권한</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">EKS 클러스터 읽기 전용</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">ECR 푸시/풀</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">CloudWatch 로그 읽기</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">운영자 권한</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">EKS 클러스터 전체 관리</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">EC2 인스턴스 관리</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">모니터링 도구 접근</span>
</span></span></code></pre></div><h3 id="네트워크-보안">네트워크 보안<a hidden class="anchor" aria-hidden="true" href="#네트워크-보안">#</a></h3>
<h4 id="네트워크-acl">네트워크 ACL<a hidden class="anchor" aria-hidden="true" href="#네트워크-acl">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">Public Subnet ACL</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Inbound</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">HTTP/HTTPS (80, 443) from 0.0.0.0/0</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">SSH (22) from 관리자 IP</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Outbound</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">All traffic to 0.0.0.0/0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Private Subnet ACL</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Inbound</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">All traffic from VPC CIDR</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Outbound</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">All traffic to 0.0.0.0/0</span>
</span></span></code></pre></div><h4 id="vpc-flow-logs">VPC Flow Logs<a hidden class="anchor" aria-hidden="true" href="#vpc-flow-logs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">설정</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">대상</span>: <span style="color:#ae81ff">CloudWatch Logs</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">트래픽 타입</span>: <span style="color:#ae81ff">ALL</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">집계 간격</span>: <span style="color:#ae81ff">1분</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">로그 그룹</span>: <span style="color:#ae81ff">/aws/vpc/flowlogs</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">보존 기간</span>: <span style="color:#ae81ff">30일</span>
</span></span></code></pre></div><hr>
<h2 id="-모니터링-및-로깅-설계">📊 모니터링 및 로깅 설계<a hidden class="anchor" aria-hidden="true" href="#-모니터링-및-로깅-설계">#</a></h2>
<h3 id="cloudwatch-설정">CloudWatch 설정<a hidden class="anchor" aria-hidden="true" href="#cloudwatch-설정">#</a></h3>
<h4 id="메트릭-수집">메트릭 수집<a hidden class="anchor" aria-hidden="true" href="#메트릭-수집">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">EKS 메트릭</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">클러스터 상태</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">노드 리소스 사용률</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">파드 상태</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">EC2 메트릭</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">CPU, 메모리, 네트워크</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">디스크 사용률</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">시스템 로드</span>
</span></span></code></pre></div><h4 id="로그-수집">로그 수집<a hidden class="anchor" aria-hidden="true" href="#로그-수집">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">로그 그룹</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">/aws/eks/openwebui-eks-dev/cluster</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">/aws/ec2/openwebui</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">/aws/application/openwebui</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">보존 기간</span>: <span style="color:#ae81ff">30일</span>
</span></span></code></pre></div><h3 id="알림-설정">알림 설정<a hidden class="anchor" aria-hidden="true" href="#알림-설정">#</a></h3>
<h4 id="cloudwatch-알람">CloudWatch 알람<a hidden class="anchor" aria-hidden="true" href="#cloudwatch-알람">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">CPU 사용률</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">임계값</span>: <span style="color:#ae81ff">80</span><span style="color:#ae81ff">%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">평가 기간</span>: <span style="color:#ae81ff">5분</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">알림</span>: <span style="color:#ae81ff">SNS Topic</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">메모리 사용률</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">임계값</span>: <span style="color:#ae81ff">85</span><span style="color:#ae81ff">%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">평가 기간</span>: <span style="color:#ae81ff">5분</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">알림</span>: <span style="color:#ae81ff">SNS Topic</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">파드 실패</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">임계값</span>: <span style="color:#ae81ff">1개 이상</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">평가 기간</span>: <span style="color:#ae81ff">1분</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">알림</span>: <span style="color:#ae81ff">SNS Topic + Slack</span>
</span></span></code></pre></div><hr>
<h2 id="-설계-검증-체크리스트">✅ 설계 검증 체크리스트<a hidden class="anchor" aria-hidden="true" href="#-설계-검증-체크리스트">#</a></h2>
<h3 id="네트워크-설계-검증">네트워크 설계 검증<a hidden class="anchor" aria-hidden="true" href="#네트워크-설계-검증">#</a></h3>
<ul>
<li><input disabled="" type="checkbox"> VPC CIDR가 다른 VPC와 겹치지 않는가?</li>
<li><input disabled="" type="checkbox"> 서브넷이 적절히 분할되어 있는가?</li>
<li><input disabled="" type="checkbox"> NAT Gateway가 각 AZ에 배치되어 있는가?</li>
<li><input disabled="" type="checkbox"> 라우팅 테이블이 올바르게 설정되어 있는가?</li>
</ul>
<h3 id="보안-설계-검증">보안 설계 검증<a hidden class="anchor" aria-hidden="true" href="#보안-설계-검증">#</a></h3>
<ul>
<li><input disabled="" type="checkbox"> 보안 그룹이 최소 권한으로 설정되어 있는가?</li>
<li><input disabled="" type="checkbox"> IAM 역할이 적절히 분리되어 있는가?</li>
<li><input disabled="" type="checkbox"> 프라이빗 서브넷의 인스턴스가 인터넷에 직접 노출되지 않는가?</li>
<li><input disabled="" type="checkbox"> 로그와 모니터링이 설정되어 있는가?</li>
</ul>
<h3 id="고가용성-검증">고가용성 검증<a hidden class="anchor" aria-hidden="true" href="#고가용성-검증">#</a></h3>
<ul>
<li><input disabled="" type="checkbox"> 리소스가 다중 AZ에 분산되어 있는가?</li>
<li><input disabled="" type="checkbox"> 자동 스케일링이 설정되어 있는가?</li>
<li><input disabled="" type="checkbox"> 백업 전략이 수립되어 있는가?</li>
<li><input disabled="" type="checkbox"> 장애 복구 절차가 문서화되어 있는가?</li>
</ul>
<h3 id="비용-최적화-검증">비용 최적화 검증<a hidden class="anchor" aria-hidden="true" href="#비용-최적화-검증">#</a></h3>
<ul>
<li><input disabled="" type="checkbox"> 불필요한 리소스가 제거되어 있는가?</li>
<li><input disabled="" type="checkbox"> Spot 인스턴스 사용을 고려했는가?</li>
<li><input disabled="" type="checkbox"> 비용 알림이 설정되어 있는가?</li>
<li><input disabled="" type="checkbox"> 리소스 태그가 적절히 설정되어 있는가?</li>
</ul>
<hr>
<h2 id="-주의사항-및-제한사항">🚨 주의사항 및 제한사항<a hidden class="anchor" aria-hidden="true" href="#-주의사항-및-제한사항">#</a></h2>
<h3 id="개발-환경-제한사항">개발 환경 제한사항<a hidden class="anchor" aria-hidden="true" href="#개발-환경-제한사항">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">인스턴스 제한</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">최대 10개 EC2 인스턴스</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">프리티어 혜택 활용</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">네트워크 제한</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">단일 리전 사용</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">최소한의 NAT Gateway</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">스토리지 제한</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">기본 EBS 볼륨만 사용</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">백업 보존 기간 단축</span>
</span></span></code></pre></div><h3 id="운영-환경-고려사항">운영 환경 고려사항<a hidden class="anchor" aria-hidden="true" href="#운영-환경-고려사항">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">확장성</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">Auto Scaling 그룹 설정</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">로드 밸런서 확장 준비</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">보안</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">WAF 설정 고려</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">VPN 연결 고려</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">모니터링</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">상세 메트릭 수집</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">알림 채널 확장</span>
</span></span></code></pre></div><hr>
<h2 id="-참고-자료">📚 참고 자료<a hidden class="anchor" aria-hidden="true" href="#-참고-자료">#</a></h2>
<ul>
<li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Scenario2.html">AWS VPC 설계 모범 사례</a></li>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/sec-group-reqs.html">Amazon EKS 보안 그룹</a></li>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/network_reqs.html">EKS 네트워킹</a></li>
<li><a href="https://aws.amazon.com/aws-cost-management/">AWS 비용 최적화</a></li>
</ul>
<hr>
<h2 id="-다음-단계">⏭️ 다음 단계<a hidden class="anchor" aria-hidden="true" href="#-다음-단계">#</a></h2>
<p>환경 설계가 완료되었다면 다음 문서로 진행하세요:</p>
<ul>
<li><strong>[03-terraform-configuration.md]</strong> - Terraform으로 인프라 구현</li>
<li><strong>[04-eks-deployment.md]</strong> - EKS 클러스터 배포</li>
<li><strong>[05-application-deployment.md]</strong> - 애플리케이션 배포</li>
</ul>
<hr>
<blockquote>
<p><strong>💡 팁</strong>: 이 설계 문서는 실제 구현 전에 팀원들과 검토하고 승인받으세요. 한 번 배포된 후에는 변경이 어려운 부분들이 있습니다!</p></blockquote>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="next" href="https://8dobibim.github.io/backend/ci_cd-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B0%80%EC%9D%B4%EB%93%9C%EB%9D%BC%EC%9D%B8/">
    <span class="title">Next »</span>
    <br>
    <span></span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://8dobibim.github.io/">8dobibim Tech Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
