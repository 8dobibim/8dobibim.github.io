<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>8dobibim Tech Blog</title>
<meta name="keywords" content="">
<meta name="description" content="ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ &amp; FAQ

ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨
1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ)
# í•œ ë²ˆì— ì „ì²´ ìƒíƒœ í™•ì¸
kubectl get nodes,pods -A | grep -E &#34;(NotReady|Error|CrashLoop|Pending)&#34;

# ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸
kubectl get events -A --sort-by=&#39;.lastTimestamp&#39; | tail -10
2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„)
# OpenWebUI ìƒíƒœ
kubectl get pods -n openwebui -o wide

# LiteLLM ìƒíƒœ  
kubectl get pods -n litellm -o wide

# ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ
kubectl get pods -n openwebui -l app=postgres
3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ)
# ë…¸ë“œ ë¦¬ì†ŒìŠ¤
kubectl top nodes

# íŒŒë“œ ë¦¬ì†ŒìŠ¤
kubectl top pods -A --sort-by=cpu

ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ
âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ
ì¦ìƒ:">
<meta name="author" content="">
<link rel="canonical" href="https://8dobibim.github.io/backend/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85-%EA%B0%80%EC%9D%B4%EB%93%9C--faq/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://8dobibim.github.io/backend/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85-%EA%B0%80%EC%9D%B4%EB%93%9C--faq/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://8dobibim.github.io/backend/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85-%EA%B0%80%EC%9D%B4%EB%93%9C--faq/">
  <meta property="og:site_name" content="8dobibim Tech Blog">
  <meta property="og:title" content="8dobibim Tech Blog">
  <meta property="og:description" content="ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ &amp; FAQ ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨ 1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ) # í•œ ë²ˆì— ì „ì²´ ìƒíƒœ í™•ì¸ kubectl get nodes,pods -A | grep -E &#34;(NotReady|Error|CrashLoop|Pending)&#34; # ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸ kubectl get events -A --sort-by=&#39;.lastTimestamp&#39; | tail -10 2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„) # OpenWebUI ìƒíƒœ kubectl get pods -n openwebui -o wide # LiteLLM ìƒíƒœ kubectl get pods -n litellm -o wide # ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ kubectl get pods -n openwebui -l app=postgres 3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ) # ë…¸ë“œ ë¦¬ì†ŒìŠ¤ kubectl top nodes # íŒŒë“œ ë¦¬ì†ŒìŠ¤ kubectl top pods -A --sort-by=cpu ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ ì¦ìƒ:">
  <meta property="og:locale" content="ko">
  <meta property="og:type" content="article">
    <meta property="article:section" content="backend">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="">
<meta name="twitter:description" content="ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ &amp; FAQ

ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨
1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ)
# í•œ ë²ˆì— ì „ì²´ ìƒíƒœ í™•ì¸
kubectl get nodes,pods -A | grep -E &#34;(NotReady|Error|CrashLoop|Pending)&#34;

# ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸
kubectl get events -A --sort-by=&#39;.lastTimestamp&#39; | tail -10
2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„)
# OpenWebUI ìƒíƒœ
kubectl get pods -n openwebui -o wide

# LiteLLM ìƒíƒœ  
kubectl get pods -n litellm -o wide

# ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ
kubectl get pods -n openwebui -l app=postgres
3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ)
# ë…¸ë“œ ë¦¬ì†ŒìŠ¤
kubectl top nodes

# íŒŒë“œ ë¦¬ì†ŒìŠ¤
kubectl top pods -A --sort-by=cpu

ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ
âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ
ì¦ìƒ:">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Backend ë¬¸ì„œ",
      "item": "https://8dobibim.github.io/backend/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "",
      "item": "https://8dobibim.github.io/backend/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85-%EA%B0%80%EC%9D%B4%EB%93%9C--faq/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "name": "",
  "description": "ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ \u0026amp; FAQ ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨ 1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ) # í•œ ë²ˆì— ì „ì²´ ìƒíƒœ í™•ì¸ kubectl get nodes,pods -A | grep -E \u0026#34;(NotReady|Error|CrashLoop|Pending)\u0026#34; # ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸ kubectl get events -A --sort-by=\u0026#39;.lastTimestamp\u0026#39; | tail -10 2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„) # OpenWebUI ìƒíƒœ kubectl get pods -n openwebui -o wide # LiteLLM ìƒíƒœ kubectl get pods -n litellm -o wide # ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ kubectl get pods -n openwebui -l app=postgres 3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ) # ë…¸ë“œ ë¦¬ì†ŒìŠ¤ kubectl top nodes # íŒŒë“œ ë¦¬ì†ŒìŠ¤ kubectl top pods -A --sort-by=cpu ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ ì¦ìƒ:\n",
  "keywords": [
    
  ],
  "articleBody": "ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ \u0026 FAQ ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨ 1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ) # í•œ ë²ˆì— ì „ì²´ ìƒíƒœ í™•ì¸ kubectl get nodes,pods -A | grep -E \"(NotReady|Error|CrashLoop|Pending)\" # ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸ kubectl get events -A --sort-by='.lastTimestamp' | tail -10 2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„) # OpenWebUI ìƒíƒœ kubectl get pods -n openwebui -o wide # LiteLLM ìƒíƒœ kubectl get pods -n litellm -o wide # ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ kubectl get pods -n openwebui -l app=postgres 3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ) # ë…¸ë“œ ë¦¬ì†ŒìŠ¤ kubectl top nodes # íŒŒë“œ ë¦¬ì†ŒìŠ¤ kubectl top pods -A --sort-by=cpu ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ ì¦ìƒ:\nNAME STATUS ROLES AGE VERSION\rnode-1 NotReady 1d v1.28.0 ì›ì¸ ë¶„ì„:\n# ë…¸ë“œ ìƒì„¸ ì •ë³´ í™•ì¸ kubectl describe node node-1 # ë…¸ë“œ ë¡œê·¸ í™•ì¸ (SSH ì ‘ì† í•„ìš”) sudo journalctl -u kubelet -f í•´ê²° ë°©ë²•:\n# 1. kubelet ì¬ì‹œì‘ sudo systemctl restart kubelet # 2. ë…¸ë“œ ì¬ë¶€íŒ… (ì‹¬ê°í•œ ê²½ìš°) sudo reboot # 3. ë…¸ë“œ êµì²´ (ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°) kubectl drain node-1 --ignore-daemonsets --delete-emptydir-data kubectl delete node node-1 # AWS ì½˜ì†”ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ (Auto Scalingì´ ìƒˆ ë…¸ë“œ ìƒì„±) âŒ íŒŒë“œê°€ Pending ìƒíƒœ ì¦ìƒ:\nNAME READY STATUS RESTARTS AGE\ropenwebui-5f7b8d6c9d-xyz 0/1 Pending 0 5m ì›ì¸ ë¶„ì„:\nkubectl describe pod openwebui-5f7b8d6c9d-xyz -n openwebui ì¼ë°˜ì ì¸ ì›ì¸ê³¼ í•´ê²°:\në¦¬ì†ŒìŠ¤ ë¶€ì¡± # ì›ì¸: Insufficient cpu/memory # í•´ê²°: ë¦¬ì†ŒìŠ¤ ìš”ì²­ëŸ‰ ì¡°ì • ë˜ëŠ” ë…¸ë“œ ì¶”ê°€ kubectl patch deployment openwebui -n openwebui -p \\ '{\"spec\":{\"template\":{\"spec\":{\"containers\":[{\"name\":\"openwebui\",\"resources\":{\"requests\":{\"cpu\":\"100m\",\"memory\":\"256Mi\"}}}]}}}}' PVC ë§ˆìš´íŠ¸ ì‹¤íŒ¨ # ì›ì¸: PVC not found or pending # PVC ìƒíƒœ í™•ì¸ kubectl get pvc -n openwebui # StorageClass í™•ì¸ kubectl get storageclass # í•´ê²°: PVC ì¬ìƒì„± kubectl delete pvc openwebui-pvc -n openwebui kubectl apply -f kubernetes/base/openwebui/pvc.yaml ë…¸ë“œ ì…€ë ‰í„° ë¬¸ì œ # ì›ì¸: No nodes match nodeSelector # ë…¸ë“œ ë ˆì´ë¸” í™•ì¸ kubectl get nodes --show-labels # í•´ê²°: nodeSelector ì œê±° ë˜ëŠ” ë ˆì´ë¸” ì¶”ê°€ kubectl label nodes node-1 environment=dev âŒ ì´ë¯¸ì§€ Pull ì‹¤íŒ¨ ì¦ìƒ:\nFailed to pull image \"ghcr.io/openwebui:latest\": rpc error: code = Unknown desc = failed to pull and unpack image í•´ê²° ë°©ë²•:\n# 1. ì´ë¯¸ì§€ íƒœê·¸ í™•ì¸ docker pull ghcr.io/openwebui:latest # 2. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì ‘ê·¼ ê¶Œí•œ í™•ì¸ kubectl get secret -n openwebui | grep docker # 3. ì´ë¯¸ì§€ íƒœê·¸ ìˆ˜ì • kubectl set image deployment/openwebui openwebui=ghcr.io/openwebui:v1.0.0 -n openwebui # 4. ëŒ€ì²´ ì´ë¯¸ì§€ ì‚¬ìš© kubectl set image deployment/openwebui openwebui=nginx:latest -n openwebui ğŸŒ ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ âŒ ì„œë¹„ìŠ¤ ì—°ê²° ì‹¤íŒ¨ ì¦ìƒ:\ncurl: (7) Failed to connect to service-name port 80: Connection refused ì§„ë‹¨ ìˆœì„œ:\n# 1. ì„œë¹„ìŠ¤ í™•ì¸ kubectl get svc -n openwebui # 2. ì—”ë“œí¬ì¸íŠ¸ í™•ì¸ kubectl get endpoints -n openwebui # 3. íŒŒë“œ ë¼ë²¨ í™•ì¸ kubectl get pods -n openwebui --show-labels # 4. ì„œë¹„ìŠ¤ ì…€ë ‰í„° í™•ì¸ kubectl get svc openwebui-service -n openwebui -o yaml | grep -A 5 selector í•´ê²° ë°©ë²•:\n# ì„œë¹„ìŠ¤ì™€ íŒŒë“œ ë¼ë²¨ ë§¤ì¹­ í™•ì¸ kubectl patch svc openwebui-service -n openwebui -p \\ '{\"spec\":{\"selector\":{\"app\":\"openwebui\"}}}' # íŒŒë“œ ì¬ì‹œì‘ kubectl rollout restart deployment/openwebui -n openwebui âŒ Ingress ì ‘ê·¼ ë¶ˆê°€ ì¦ìƒ:\ncurl: (52) Empty reply from server ì§„ë‹¨:\n# Ingress ìƒíƒœ í™•ì¸ kubectl get ingress -n openwebui -o wide # Ingress Controller ìƒíƒœ kubectl get pods -n kube-system -l app.kubernetes.io/name=aws-load-balancer-controller # ALB ìƒíƒœ í™•ì¸ (AWS) aws elbv2 describe-load-balancers í•´ê²° ë°©ë²•:\n# 1. Ingress ì¬ìƒì„± kubectl delete ingress openwebui-ingress -n openwebui kubectl apply -f kubernetes/base/ingress/ingress.yaml # 2. ì„œë¹„ìŠ¤ íƒ€ì…ì„ LoadBalancerë¡œ ì„ì‹œ ë³€ê²½ kubectl patch svc openwebui-service -n openwebui -p \\ '{\"spec\":{\"type\":\"LoadBalancer\"}}' # 3. í¬íŠ¸ í¬ì›Œë”©ìœ¼ë¡œ ì„ì‹œ ì ‘ê·¼ kubectl port-forward svc/openwebui-service 8080:8080 -n openwebui âŒ DNS í•´ì„ ì‹¤íŒ¨ ì¦ìƒ:\nnslookup: can't resolve 'service-name.namespace.svc.cluster.local' ì§„ë‹¨ ë° í•´ê²°:\n# CoreDNS ìƒíƒœ í™•ì¸ kubectl get pods -n kube-system -l k8s-app=kube-dns # DNS ì„¤ì • í™•ì¸ kubectl get configmap coredns -n kube-system -o yaml # DNS í…ŒìŠ¤íŠ¸ kubectl run debug --image=busybox -it --rm -- nslookup kubernetes.default.svc.cluster.local # CoreDNS ì¬ì‹œì‘ kubectl rollout restart deployment/coredns -n kube-system ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ì œ âŒ PostgreSQL ì—°ê²° ì‹¤íŒ¨ ì¦ìƒ:\npsql: FATAL: password authentication failed for user \"openwebui\" ì§„ë‹¨:\n# íŒŒë“œ ìƒíƒœ í™•ì¸ kubectl get pods -l app=postgres -n openwebui # ë¡œê·¸ í™•ì¸ kubectl logs deployment/postgres -n openwebui # ì‹œí¬ë¦¿ í™•ì¸ kubectl get secret app-secrets -n openwebui -o yaml í•´ê²° ë°©ë²•:\n# 1. ì‹œí¬ë¦¿ ì¬ìƒì„± kubectl delete secret app-secrets -n openwebui kubectl create secret generic app-secrets \\ --from-literal=POSTGRES_USER=openwebui \\ --from-literal=POSTGRES_PASSWORD=newpassword \\ -n openwebui # 2. ë°ì´í„°ë² ì´ìŠ¤ ì¬ì‹œì‘ kubectl rollout restart deployment/postgres -n openwebui # 3. ì§ì ‘ ì—°ê²° í…ŒìŠ¤íŠ¸ kubectl exec -it deployment/postgres -n openwebui -- \\ psql -U openwebui -d openwebui -c \"SELECT 1;\" âŒ ë°ì´í„°ë² ì´ìŠ¤ ë””ìŠ¤í¬ ë¶€ì¡± ì¦ìƒ:\nERROR: could not extend file \"base/16384/16439\": No space left on device í•´ê²° ë°©ë²•:\n# 1. PVC í¬ê¸° í™•ì¥ kubectl patch pvc postgres-pvc -n openwebui -p \\ '{\"spec\":{\"resources\":{\"requests\":{\"storage\":\"20Gi\"}}}}' # 2. ë¶ˆí•„ìš”í•œ ë°ì´í„° ì •ë¦¬ kubectl exec deployment/postgres -n openwebui -- \\ psql -U openwebui -d openwebui -c \"VACUUM FULL;\" # 3. ë°±ì—… í›„ ë°ì´í„°ë² ì´ìŠ¤ ì¬ìƒì„± # ë°±ì—… ì‹¤í–‰ kubectl exec deployment/postgres -n openwebui -- \\ pg_dump -U openwebui openwebui \u003e backup.sql # PVC ì‚­ì œ ë° ì¬ìƒì„± kubectl delete pvc postgres-pvc -n openwebui kubectl apply -f kubernetes/base/postgres/pvc.yaml # ë³µì› kubectl exec -i deployment/postgres -n openwebui -- \\ psql -U openwebui openwebui \u003c backup.sql ğŸ¤– ì• í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œ âŒ OpenWebUI 500 ì—ëŸ¬ ì¦ìƒ:\nHTTP 500 Internal Server Error ì§„ë‹¨:\n# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ í™•ì¸ kubectl logs deployment/openwebui -n openwebui --tail=100 # í™˜ê²½ ë³€ìˆ˜ í™•ì¸ kubectl exec deployment/openwebui -n openwebui -- env | grep -E \"(DATABASE|SECRET)\" # í—¬ìŠ¤ì²´í¬ í™•ì¸ kubectl exec deployment/openwebui -n openwebui -- \\ curl -f http://localhost:8080/health í•´ê²° ë°©ë²•:\n# 1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘ kubectl rollout restart deployment/openwebui -n openwebui # 2. í™˜ê²½ ë³€ìˆ˜ í™•ì¸ ë° ìˆ˜ì • kubectl patch deployment openwebui -n openwebui -p \\ '{\"spec\":{\"template\":{\"spec\":{\"containers\":[{\"name\":\"openwebui\",\"env\":[{\"name\":\"DEBUG\",\"value\":\"true\"}]}]}}}}' # 3. ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°± kubectl rollout undo deployment/openwebui -n openwebui # 4. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸ kubectl exec deployment/openwebui -n openwebui -- \\ nc -zv postgres-service 5432 âŒ LiteLLM API ì‘ë‹µ ì—†ìŒ ì¦ìƒ:\ncurl: (7) Failed to connect to litellm-service port 4000 ì§„ë‹¨ ë° í•´ê²°:\n# íŒŒë“œ ìƒíƒœ í™•ì¸ kubectl get pods -l app=litellm -n litellm # API í‚¤ í™•ì¸ kubectl get secret api-keys -n litellm -o yaml # ì„¤ì • íŒŒì¼ í™•ì¸ kubectl get configmap litellm-config -n litellm -o yaml # ì§ì ‘ API í…ŒìŠ¤íŠ¸ kubectl exec deployment/litellm -n litellm -- \\ curl -s http://localhost:4000/health # ì¬ì‹œì‘ kubectl rollout restart deployment/litellm -n litellm âŒ ë©”ëª¨ë¦¬ ë¶€ì¡± (OOMKilled) ì¦ìƒ:\nLast State: Terminated\rReason: OOMKilled í•´ê²° ë°©ë²•:\n# 1. ë©”ëª¨ë¦¬ ë¦¬ë¯¸íŠ¸ ì¦ê°€ kubectl patch deployment openwebui -n openwebui -p \\ '{\"spec\":{\"template\":{\"spec\":{\"containers\":[{\"name\":\"openwebui\",\"resources\":{\"limits\":{\"memory\":\"2Gi\"}}}]}}}}' # 2. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸ kubectl top pods -n openwebui --containers # 3. ë©”ëª¨ë¦¬ ìš”ì²­ëŸ‰ ì¡°ì • kubectl patch deployment openwebui -n openwebui -p \\ '{\"spec\":{\"template\":{\"spec\":{\"containers\":[{\"name\":\"openwebui\",\"resources\":{\"requests\":{\"memory\":\"512Mi\"}}}]}}}}' ğŸ“Š ì„±ëŠ¥ ë¬¸ì œ âŒ ëŠë¦° ì‘ë‹µ ì‹œê°„ ì§„ë‹¨:\n# ì‘ë‹µ ì‹œê°„ ì¸¡ì • kubectl exec deployment/openwebui -n openwebui -- \\ curl -w \"Total time: %{time_total}s\\n\" -o /dev/null -s http://localhost:8080 # ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸ kubectl top pods -n openwebui --containers # ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì„±ëŠ¥ í™•ì¸ kubectl exec deployment/postgres -n openwebui -- \\ psql -U openwebui -d openwebui -c \\ \"SELECT query, mean_exec_time FROM pg_stat_statements ORDER BY mean_exec_time DESC LIMIT 5;\" í•´ê²° ë°©ë²•:\n# 1. HPA ìŠ¤ì¼€ì¼ë§ í™•ì¸ kubectl get hpa -n openwebui # 2. ìˆ˜ë™ ìŠ¤ì¼€ì¼ë§ kubectl scale deployment openwebui --replicas=4 -n openwebui # 3. ë¦¬ì†ŒìŠ¤ ì¦ëŸ‰ kubectl patch deployment openwebui -n openwebui -p \\ '{\"spec\":{\"template\":{\"spec\":{\"containers\":[{\"name\":\"openwebui\",\"resources\":{\"requests\":{\"cpu\":\"500m\",\"memory\":\"1Gi\"}}}]}}}}' âŒ ë†’ì€ CPU ì‚¬ìš©ë¥  í•´ê²° ë°©ë²•:\n# CPU ì‚¬ìš©ë¥  í™•ì¸ kubectl top pods -n openwebui --sort-by=cpu # í”„ë¡œíŒŒì¼ë§ (ê°€ëŠ¥í•œ ê²½ìš°) kubectl exec deployment/openwebui -n openwebui -- \\ curl -s http://localhost:8080/debug/pprof/profile \u003e cpu.prof # ìˆ˜í‰ ìŠ¤ì¼€ì¼ë§ kubectl patch hpa openwebui-hpa -n openwebui -p \\ '{\"spec\":{\"targetCPUUtilizationPercentage\":50}}' ğŸ”’ ë³´ì•ˆ ë¬¸ì œ âŒ ì´ë¯¸ì§€ ì·¨ì•½ì  ì§„ë‹¨:\n# ì´ë¯¸ì§€ ìŠ¤ìº” trivy image ghcr.io/openwebui:latest # ì‹¤í–‰ ì¤‘ì¸ ì´ë¯¸ì§€ í™•ì¸ kubectl get pods -n openwebui -o jsonpath='{.items[*].spec.containers[*].image}' í•´ê²° ë°©ë²•:\n# 1. ìµœì‹  ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ kubectl set image deployment/openwebui openwebui=ghcr.io/openwebui:v1.0.1 -n openwebui # 2. ë³´ì•ˆ íŒ¨ì¹˜ëœ ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì‚¬ìš© # Dockerfile ìˆ˜ì • í›„ ì¬ë¹Œë“œ í•„ìš” âŒ ì‹œí¬ë¦¿ ë…¸ì¶œ ì§„ë‹¨:\n# ì‹œí¬ë¦¿ í™•ì¸ kubectl get secrets -A # íŒŒë“œì—ì„œ ì‹œí¬ë¦¿ ì‚¬ìš© í™•ì¸ kubectl get pods -n openwebui -o yaml | grep -A 10 secretRef í•´ê²° ë°©ë²•:\n# 1. ì‹œí¬ë¦¿ ë¡œí…Œì´ì…˜ kubectl delete secret api-keys -n litellm kubectl create secret generic api-keys \\ --from-literal=OPENAI_API_KEY=new-secure-key \\ -n litellm # 2. ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘ kubectl rollout restart deployment/litellm -n litellm ğŸ“‹ FAQ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸) Q1: íŒŒë“œê°€ ê³„ì† ì¬ì‹œì‘ë˜ëŠ” ì´ìœ ëŠ”? A: ê°€ì¥ ì¼ë°˜ì ì¸ ì›ì¸ë“¤:\n# 1. í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨ kubectl describe pod -n openwebui | grep -A 10 Events # 2. ë©”ëª¨ë¦¬ ë¶€ì¡± (OOMKilled) kubectl describe pod -n openwebui | grep OOMKilled # 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì—ëŸ¬ kubectl logs -n openwebui --previous # í•´ê²°: ë¦¬ì†ŒìŠ¤ ì¦ëŸ‰ ë˜ëŠ” í—¬ìŠ¤ì²´í¬ ì¡°ì • Q2: ë°°í¬ í›„ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ì•ˆ ë¼ìš” A: ë‹¨ê³„ë³„ í™•ì¸:\n# 1. íŒŒë“œ ìƒíƒœ kubectl get pods -n openwebui # 2. ì„œë¹„ìŠ¤ ìƒíƒœ kubectl get svc -n openwebui # 3. Ingress ìƒíƒœ kubectl get ingress -n openwebui # 4. ë¡œë“œë°¸ëŸ°ì„œ ìƒíƒœ (AWS ì½˜ì†” í™•ì¸) aws elbv2 describe-load-balancers # ì„ì‹œ í•´ê²°: í¬íŠ¸ í¬ì›Œë”© kubectl port-forward svc/openwebui-service 8080:8080 -n openwebui Q3: ë°ì´í„°ê°€ ì‚¬ë¼ì¡Œì–´ìš” A: ë°ì´í„° ë³µêµ¬ ë°©ë²•:\n# 1. PVC ìƒíƒœ í™•ì¸ kubectl get pvc -n openwebui # 2. ë°±ì—…ì—ì„œ ë³µì› aws s3 ls s3://openwebui-backups/database/ # 3. ìµœì‹  ë°±ì—…ìœ¼ë¡œ ë³µì› ./restore-database.sh openwebui_backup_20240301_120000.sql Q4: API í‚¤ê°€ ì‘ë™í•˜ì§€ ì•Šì•„ìš” A: API í‚¤ í™•ì¸ ë° ì—…ë°ì´íŠ¸:\n# 1. í˜„ì¬ ì‹œí¬ë¦¿ í™•ì¸ kubectl get secret api-keys -n litellm -o yaml # 2. ë””ì½”ë”©í•´ì„œ í™•ì¸ kubectl get secret api-keys -n litellm -o jsonpath='{.data.OPENAI_API_KEY}' | base64 -d # 3. ìƒˆ í‚¤ë¡œ ì—…ë°ì´íŠ¸ kubectl create secret generic api-keys \\ --from-literal=OPENAI_API_KEY=sk-new-key \\ --dry-run=client -o yaml | kubectl apply -f - # 4. íŒŒë“œ ì¬ì‹œì‘ kubectl rollout restart deployment/litellm -n litellm Q5: ë¹„ìš©ì´ ì˜ˆìƒë³´ë‹¤ ë§ì´ ë‚˜ì™€ìš” A: ë¹„ìš© ìµœì í™” ë°©ë²•:\n# 1. ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸ kubectl top nodes kubectl top pods -A # 2. Spot ì¸ìŠ¤í„´ìŠ¤ í™œìš© kubectl get nodes -l node.kubernetes.io/instance-type # 3. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ ì •ë¦¬ kubectl get pods -A --field-selector=status.phase=Succeeded kubectl delete pods --field-selector=status.phase=Succeeded -A # 4. HPA ìµœì í™” kubectl patch hpa openwebui-hpa -n openwebui -p \\ '{\"spec\":{\"minReplicas\":1,\"targetCPUUtilizationPercentage\":70}}' Q6: ë¡œê·¸ë¥¼ ì–´ë””ì„œ í™•ì¸í•˜ë‚˜ìš”? A: ë¡œê·¸ í™•ì¸ ë°©ë²•:\n# 1. ì‹¤ì‹œê°„ ë¡œê·¸ kubectl logs -f deployment/openwebui -n openwebui # 2. íŠ¹ì • ì‹œê°„ëŒ€ ë¡œê·¸ kubectl logs --since=1h deployment/openwebui -n openwebui # 3. ì´ì „ ì»¨í…Œì´ë„ˆ ë¡œê·¸ (ì¬ì‹œì‘ëœ ê²½ìš°) kubectl logs deployment/openwebui -n openwebui --previous # 4. ëª¨ë“  íŒŒë“œ ë¡œê·¸ kubectl logs -l app=openwebui -n openwebui # 5. ì¤‘ì•™í™”ëœ ë¡œê¹… (Kibana) # http://kibana.your-domain.comì—ì„œ í™•ì¸ Q7: ì„±ëŠ¥ì´ ëŠë ¤ì¡Œì–´ìš” A: ì„±ëŠ¥ ì§„ë‹¨ ë‹¨ê³„:\n# 1. ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸ kubectl top pods -n openwebui --containers # 2. ì‘ë‹µ ì‹œê°„ ì¸¡ì • kubectl exec deployment/openwebui -n openwebui -- \\ curl -w \"%{time_total}\" -o /dev/null -s http://localhost:8080 # 3. ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ í™•ì¸ kubectl exec deployment/postgres -n openwebui -- \\ psql -U openwebui -d openwebui -c \\ \"SELECT * FROM pg_stat_activity WHERE state = 'active';\" # 4. ìŠ¤ì¼€ì¼ë§ ì‹¤í–‰ kubectl scale deployment openwebui --replicas=3 -n openwebui Q8: ì—…ë°ì´íŠ¸ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”? A: ì•ˆì „í•œ ì—…ë°ì´íŠ¸ ë°©ë²•:\n# 1. ë°±ì—… ë¨¼ì € ì‹¤í–‰ ./backup-database.sh # 2. ìƒˆ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ kubectl set image deployment/openwebui openwebui=ghcr.io/openwebui:v1.1.0 -n openwebui # 3. ë¡¤ì•„ì›ƒ ìƒíƒœ í™•ì¸ kubectl rollout status deployment/openwebui -n openwebui # 4. ë¬¸ì œ ë°œìƒ ì‹œ ë¡¤ë°± kubectl rollout undo deployment/openwebui -n openwebui ğŸ†˜ ê¸´ê¸‰ ìƒí™©ë³„ ëŒ€ì‘ ğŸ”¥ ì „ì²´ ì„œë¹„ìŠ¤ ë‹¤ìš´ # 1. ì¦‰ì‹œ ìƒíƒœ í™•ì¸ (30ì´ˆ) kubectl get nodes,pods -A | grep -v Running # 2. íŠ¸ë˜í”½ ì°¨ë‹¨ (ì„ì‹œ ì ê²€ í˜ì´ì§€) kubectl patch ingress openwebui-ingress -n openwebui -p \\ '{\"metadata\":{\"annotations\":{\"nginx.ingress.kubernetes.io/server-snippet\":\"return 503 \\\"Service temporarily unavailable\\\";\"}}}' # 3. í•µì‹¬ ì„œë¹„ìŠ¤ë¶€í„° ë³µêµ¬ kubectl rollout restart deployment/postgres -n openwebui kubectl rollout restart deployment/litellm -n litellm kubectl rollout restart deployment/openwebui -n openwebui # 4. ìƒíƒœ í™•ì¸ í›„ íŠ¸ë˜í”½ ë³µêµ¬ kubectl patch ingress openwebui-ingress -n openwebui -p \\ '{\"metadata\":{\"annotations\":{\"nginx.ingress.kubernetes.io/server-snippet\":null}}}' ğŸ’¾ ë°ì´í„° ì†ì‹¤ ìœ„í—˜ # 1. ì¦‰ì‹œ ë°±ì—… ì‹¤í–‰ kubectl exec deployment/postgres -n openwebui -- \\ pg_dump -U openwebui openwebui \u003e emergency_backup_$(date +%Y%m%d_%H%M%S).sql # 2. PVC ìŠ¤ëƒ…ìƒ· ìƒì„± (AWS EBS) aws ec2 describe-volumes --filters \"Name=tag:kubernetes.io/created-for/pvc/name,Values=postgres-pvc\" aws ec2 create-snapshot --volume-id vol-xxxxxxxxx --description \"Emergency snapshot\" # 3. ì½ê¸° ì „ìš© ëª¨ë“œë¡œ ì „í™˜ (ë°ì´í„° ë³´í˜¸) kubectl patch deployment openwebui -n openwebui -p \\ '{\"spec\":{\"replicas\":0}}' ğŸš¨ ë³´ì•ˆ ì¹¨í•´ ì˜ì‹¬ # 1. ì¦‰ì‹œ ë„¤íŠ¸ì›Œí¬ ì°¨ë‹¨ kubectl delete ingress openwebui-ingress -n openwebui # 2. ë¡œê·¸ ìˆ˜ì§‘ ë° ë³´ì¡´ kubectl logs deployment/openwebui -n openwebui \u003e security_logs_$(date +%Y%m%d_%H%M%S).log # 3. ì‹œí¬ë¦¿ ë¡œí…Œì´ì…˜ kubectl delete secret api-keys -n litellm kubectl delete secret app-secrets -n openwebui # 4. í¬ë Œì‹ ë¶„ì„ìš© íŒŒë“œ ì´ë¯¸ì§€ ë³´ì¡´ kubectl get pods -n openwebui -o yaml \u003e pods_snapshot_$(date +%Y%m%d_%H%M%S).yaml ë¬¸ì„œ ê°œì„  ìš”ì²­ ìƒˆë¡œìš´ ë¬¸ì œ ë°œìƒ ì‹œ ì´ ë¬¸ì„œì— ì¶”ê°€ í•´ê²°ì±…ì´ íš¨ê³¼ì ì´ì§€ ì•Šì€ ê²½ìš° í”¼ë“œë°± ë” ë‚˜ì€ í•´ê²° ë°©ë²• ë°œê²¬ ì‹œ ê³µìœ  ğŸ”„ ë¬¸ì œ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¬¸ì œ ë°œìƒ ì‹œ ë‹¤ìŒ ìˆœì„œë¡œ ì§„í–‰:\nê¸°ë³¸ ìƒíƒœ í™•ì¸ (ë…¸ë“œ, íŒŒë“œ, ì„œë¹„ìŠ¤) ë¡œê·¸ í™•ì¸ (ì• í”Œë¦¬ì¼€ì´ì…˜, ì‹œìŠ¤í…œ) ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸ ìµœê·¼ ë³€ê²½ì‚¬í•­ í™•ì¸ ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸ ë°±ì—… ìƒíƒœ í™•ì¸ ì„ì‹œ í•´ê²°ì±… ì ìš© ê·¼ë³¸ ì›ì¸ ë¶„ì„ ì˜êµ¬ í•´ê²°ì±… ì ìš© ë¬¸ì„œ ì—…ë°ì´íŠ¸ ",
  "wordCount" : "2035",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://8dobibim.github.io/backend/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85-%EA%B0%80%EC%9D%B4%EB%93%9C--faq/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "8dobibim Tech Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://8dobibim.github.io/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://8dobibim.github.io/" accesskey="h" title="8dobibim Tech Blog (Alt + H)">8dobibim Tech Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://8dobibim.github.io/frontend/" title="ğŸ–¥ í”„ë¡ íŠ¸ì—”ë“œ">
                    <span>ğŸ–¥ í”„ë¡ íŠ¸ì—”ë“œ</span>
                </a>
            </li>
            <li>
                <a href="https://8dobibim.github.io/backend/" title="ğŸ’¾ ë°±ì—”ë“œ">
                    <span>ğŸ’¾ ë°±ì—”ë“œ</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://8dobibim.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://8dobibim.github.io/backend/">Backend ë¬¸ì„œ</a></div>
    <h1 class="post-title entry-hint-parent">
      
    </h1>
    <div class="post-meta">10 min&nbsp;Â·&nbsp;2035 words

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#-%ed%8a%b8%eb%9f%ac%eb%b8%94%ec%8a%88%ed%8c%85-%ea%b0%80%ec%9d%b4%eb%93%9c--faq" aria-label="ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ &amp; FAQ">ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ &amp; FAQ</a><ul>
                        
                <li>
                    <a href="#-%eb%b9%a0%eb%a5%b8-%eb%ac%b8%ec%a0%9c-%ec%a7%84%eb%8b%a8" aria-label="ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨">ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨</a><ul>
                        
                <li>
                    <a href="#1%eb%8b%a8%ea%b3%84-%ea%b8%b0%eb%b3%b8-%ec%83%81%ed%83%9c-%ed%99%95%ec%9d%b8-30%ec%b4%88" aria-label="1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ)">1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ)</a></li>
                <li>
                    <a href="#2%eb%8b%a8%ea%b3%84-%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%eb%b3%84-%ec%83%81%ed%83%9c-1%eb%b6%84" aria-label="2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„)">2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„)</a></li>
                <li>
                    <a href="#3%eb%8b%a8%ea%b3%84-%eb%a6%ac%ec%86%8c%ec%8a%a4-%ec%82%ac%ec%9a%a9%eb%9f%89-30%ec%b4%88" aria-label="3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ)">3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ)</a></li></ul>
                </li>
                <li>
                    <a href="#-%ec%9d%b8%ed%94%84%eb%9d%bc-%ea%b4%80%eb%a0%a8-%eb%ac%b8%ec%a0%9c" aria-label="ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ">ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ</a><ul>
                        
                <li>
                    <a href="#-%eb%85%b8%eb%93%9c%ea%b0%80-notready-%ec%83%81%ed%83%9c" aria-label="âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ">âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ</a></li>
                <li>
                    <a href="#-%ed%8c%8c%eb%93%9c%ea%b0%80-pending-%ec%83%81%ed%83%9c" aria-label="âŒ íŒŒë“œê°€ Pending ìƒíƒœ">âŒ íŒŒë“œê°€ Pending ìƒíƒœ</a></li>
                <li>
                    <a href="#-%ec%9d%b4%eb%af%b8%ec%a7%80-pull-%ec%8b%a4%ed%8c%a8" aria-label="âŒ ì´ë¯¸ì§€ Pull ì‹¤íŒ¨">âŒ ì´ë¯¸ì§€ Pull ì‹¤íŒ¨</a></li></ul>
                </li>
                <li>
                    <a href="#-%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%82%b9-%eb%ac%b8%ec%a0%9c" aria-label="ğŸŒ ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ">ğŸŒ ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ</a><ul>
                        
                <li>
                    <a href="#-%ec%84%9c%eb%b9%84%ec%8a%a4-%ec%97%b0%ea%b2%b0-%ec%8b%a4%ed%8c%a8" aria-label="âŒ ì„œë¹„ìŠ¤ ì—°ê²° ì‹¤íŒ¨">âŒ ì„œë¹„ìŠ¤ ì—°ê²° ì‹¤íŒ¨</a></li>
                <li>
                    <a href="#-ingress-%ec%a0%91%ea%b7%bc-%eb%b6%88%ea%b0%80" aria-label="âŒ Ingress ì ‘ê·¼ ë¶ˆê°€">âŒ Ingress ì ‘ê·¼ ë¶ˆê°€</a></li>
                <li>
                    <a href="#-dns-%ed%95%b4%ec%84%9d-%ec%8b%a4%ed%8c%a8" aria-label="âŒ DNS í•´ì„ ì‹¤íŒ¨">âŒ DNS í•´ì„ ì‹¤íŒ¨</a></li></ul>
                </li>
                <li>
                    <a href="#-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%b2%a0%ec%9d%b4%ec%8a%a4-%eb%ac%b8%ec%a0%9c" aria-label="ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ì œ">ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ì œ</a><ul>
                        
                <li>
                    <a href="#-postgresql-%ec%97%b0%ea%b2%b0-%ec%8b%a4%ed%8c%a8" aria-label="âŒ PostgreSQL ì—°ê²° ì‹¤íŒ¨">âŒ PostgreSQL ì—°ê²° ì‹¤íŒ¨</a></li>
                <li>
                    <a href="#-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%b2%a0%ec%9d%b4%ec%8a%a4-%eb%94%94%ec%8a%a4%ed%81%ac-%eb%b6%80%ec%a1%b1" aria-label="âŒ ë°ì´í„°ë² ì´ìŠ¤ ë””ìŠ¤í¬ ë¶€ì¡±">âŒ ë°ì´í„°ë² ì´ìŠ¤ ë””ìŠ¤í¬ ë¶€ì¡±</a></li></ul>
                </li>
                <li>
                    <a href="#-%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98-%eb%ac%b8%ec%a0%9c" aria-label="ğŸ¤– ì• í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œ">ğŸ¤– ì• í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œ</a><ul>
                        
                <li>
                    <a href="#-openwebui-500-%ec%97%90%eb%9f%ac" aria-label="âŒ OpenWebUI 500 ì—ëŸ¬">âŒ OpenWebUI 500 ì—ëŸ¬</a></li>
                <li>
                    <a href="#-litellm-api-%ec%9d%91%eb%8b%b5-%ec%97%86%ec%9d%8c" aria-label="âŒ LiteLLM API ì‘ë‹µ ì—†ìŒ">âŒ LiteLLM API ì‘ë‹µ ì—†ìŒ</a></li>
                <li>
                    <a href="#-%eb%a9%94%eb%aa%a8%eb%a6%ac-%eb%b6%80%ec%a1%b1-oomkilled" aria-label="âŒ ë©”ëª¨ë¦¬ ë¶€ì¡± (OOMKilled)">âŒ ë©”ëª¨ë¦¬ ë¶€ì¡± (OOMKilled)</a></li></ul>
                </li>
                <li>
                    <a href="#-%ec%84%b1%eb%8a%a5-%eb%ac%b8%ec%a0%9c" aria-label="ğŸ“Š ì„±ëŠ¥ ë¬¸ì œ">ğŸ“Š ì„±ëŠ¥ ë¬¸ì œ</a><ul>
                        
                <li>
                    <a href="#-%eb%8a%90%eb%a6%b0-%ec%9d%91%eb%8b%b5-%ec%8b%9c%ea%b0%84" aria-label="âŒ ëŠë¦° ì‘ë‹µ ì‹œê°„">âŒ ëŠë¦° ì‘ë‹µ ì‹œê°„</a></li>
                <li>
                    <a href="#-%eb%86%92%ec%9d%80-cpu-%ec%82%ac%ec%9a%a9%eb%a5%a0" aria-label="âŒ ë†’ì€ CPU ì‚¬ìš©ë¥ ">âŒ ë†’ì€ CPU ì‚¬ìš©ë¥ </a></li></ul>
                </li>
                <li>
                    <a href="#-%eb%b3%b4%ec%95%88-%eb%ac%b8%ec%a0%9c" aria-label="ğŸ”’ ë³´ì•ˆ ë¬¸ì œ">ğŸ”’ ë³´ì•ˆ ë¬¸ì œ</a><ul>
                        
                <li>
                    <a href="#-%ec%9d%b4%eb%af%b8%ec%a7%80-%ec%b7%a8%ec%95%bd%ec%a0%90" aria-label="âŒ ì´ë¯¸ì§€ ì·¨ì•½ì ">âŒ ì´ë¯¸ì§€ ì·¨ì•½ì </a></li>
                <li>
                    <a href="#-%ec%8b%9c%ed%81%ac%eb%a6%bf-%eb%85%b8%ec%b6%9c" aria-label="âŒ ì‹œí¬ë¦¿ ë…¸ì¶œ">âŒ ì‹œí¬ë¦¿ ë…¸ì¶œ</a></li></ul>
                </li>
                <li>
                    <a href="#-faq-%ec%9e%90%ec%a3%bc-%eb%ac%bb%eb%8a%94-%ec%a7%88%eb%ac%b8" aria-label="ğŸ“‹ FAQ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)">ğŸ“‹ FAQ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)</a><ul>
                        
                <li>
                    <a href="#q1-%ed%8c%8c%eb%93%9c%ea%b0%80-%ea%b3%84%ec%86%8d-%ec%9e%ac%ec%8b%9c%ec%9e%91%eb%90%98%eb%8a%94-%ec%9d%b4%ec%9c%a0%eb%8a%94" aria-label="Q1: íŒŒë“œê°€ ê³„ì† ì¬ì‹œì‘ë˜ëŠ” ì´ìœ ëŠ”?">Q1: íŒŒë“œê°€ ê³„ì† ì¬ì‹œì‘ë˜ëŠ” ì´ìœ ëŠ”?</a></li>
                <li>
                    <a href="#q2-%eb%b0%b0%ed%8f%ac-%ed%9b%84-%ec%99%b8%eb%b6%80%ec%97%90%ec%84%9c-%ec%a0%91%ea%b7%bc%ec%9d%b4-%ec%95%88-%eb%8f%bc%ec%9a%94" aria-label="Q2: ë°°í¬ í›„ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ì•ˆ ë¼ìš”">Q2: ë°°í¬ í›„ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ì•ˆ ë¼ìš”</a></li>
                <li>
                    <a href="#q3-%eb%8d%b0%ec%9d%b4%ed%84%b0%ea%b0%80-%ec%82%ac%eb%9d%bc%ec%a1%8c%ec%96%b4%ec%9a%94" aria-label="Q3: ë°ì´í„°ê°€ ì‚¬ë¼ì¡Œì–´ìš”">Q3: ë°ì´í„°ê°€ ì‚¬ë¼ì¡Œì–´ìš”</a></li>
                <li>
                    <a href="#q4-api-%ed%82%a4%ea%b0%80-%ec%9e%91%eb%8f%99%ed%95%98%ec%a7%80-%ec%95%8a%ec%95%84%ec%9a%94" aria-label="Q4: API í‚¤ê°€ ì‘ë™í•˜ì§€ ì•Šì•„ìš”">Q4: API í‚¤ê°€ ì‘ë™í•˜ì§€ ì•Šì•„ìš”</a></li>
                <li>
                    <a href="#q5-%eb%b9%84%ec%9a%a9%ec%9d%b4-%ec%98%88%ec%83%81%eb%b3%b4%eb%8b%a4-%eb%a7%8e%ec%9d%b4-%eb%82%98%ec%99%80%ec%9a%94" aria-label="Q5: ë¹„ìš©ì´ ì˜ˆìƒë³´ë‹¤ ë§ì´ ë‚˜ì™€ìš”">Q5: ë¹„ìš©ì´ ì˜ˆìƒë³´ë‹¤ ë§ì´ ë‚˜ì™€ìš”</a></li>
                <li>
                    <a href="#q6-%eb%a1%9c%ea%b7%b8%eb%a5%bc-%ec%96%b4%eb%94%94%ec%84%9c-%ed%99%95%ec%9d%b8%ed%95%98%eb%82%98%ec%9a%94" aria-label="Q6: ë¡œê·¸ë¥¼ ì–´ë””ì„œ í™•ì¸í•˜ë‚˜ìš”?">Q6: ë¡œê·¸ë¥¼ ì–´ë””ì„œ í™•ì¸í•˜ë‚˜ìš”?</a></li>
                <li>
                    <a href="#q7-%ec%84%b1%eb%8a%a5%ec%9d%b4-%eb%8a%90%eb%a0%a4%ec%a1%8c%ec%96%b4%ec%9a%94" aria-label="Q7: ì„±ëŠ¥ì´ ëŠë ¤ì¡Œì–´ìš”">Q7: ì„±ëŠ¥ì´ ëŠë ¤ì¡Œì–´ìš”</a></li>
                <li>
                    <a href="#q8-%ec%97%85%eb%8d%b0%ec%9d%b4%ed%8a%b8%eb%8a%94-%ec%96%b4%eb%96%bb%ea%b2%8c-%ed%95%98%eb%82%98%ec%9a%94" aria-label="Q8: ì—…ë°ì´íŠ¸ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?">Q8: ì—…ë°ì´íŠ¸ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</a></li></ul>
                </li>
                <li>
                    <a href="#-%ea%b8%b4%ea%b8%89-%ec%83%81%ed%99%a9%eb%b3%84-%eb%8c%80%ec%9d%91" aria-label="ğŸ†˜ ê¸´ê¸‰ ìƒí™©ë³„ ëŒ€ì‘">ğŸ†˜ ê¸´ê¸‰ ìƒí™©ë³„ ëŒ€ì‘</a><ul>
                        
                <li>
                    <a href="#-%ec%a0%84%ec%b2%b4-%ec%84%9c%eb%b9%84%ec%8a%a4-%eb%8b%a4%ec%9a%b4" aria-label="ğŸ”¥ ì „ì²´ ì„œë¹„ìŠ¤ ë‹¤ìš´">ğŸ”¥ ì „ì²´ ì„œë¹„ìŠ¤ ë‹¤ìš´</a></li>
                <li>
                    <a href="#-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%86%90%ec%8b%a4-%ec%9c%84%ed%97%98" aria-label="ğŸ’¾ ë°ì´í„° ì†ì‹¤ ìœ„í—˜">ğŸ’¾ ë°ì´í„° ì†ì‹¤ ìœ„í—˜</a></li>
                <li>
                    <a href="#-%eb%b3%b4%ec%95%88-%ec%b9%a8%ed%95%b4-%ec%9d%98%ec%8b%ac" aria-label="ğŸš¨ ë³´ì•ˆ ì¹¨í•´ ì˜ì‹¬">ğŸš¨ ë³´ì•ˆ ì¹¨í•´ ì˜ì‹¬</a></li>
                <li>
                    <a href="#%eb%ac%b8%ec%84%9c-%ea%b0%9c%ec%84%a0-%ec%9a%94%ec%b2%ad" aria-label="ë¬¸ì„œ ê°œì„  ìš”ì²­">ë¬¸ì„œ ê°œì„  ìš”ì²­</a></li></ul>
                </li>
                <li>
                    <a href="#-%eb%ac%b8%ec%a0%9c-%ed%95%b4%ea%b2%b0-%ec%b2%b4%ed%81%ac%eb%a6%ac%ec%8a%a4%ed%8a%b8" aria-label="ğŸ”„ ë¬¸ì œ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸">ğŸ”„ ë¬¸ì œ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-ê°€ì´ë“œ--faq">ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ &amp; FAQ<a hidden class="anchor" aria-hidden="true" href="#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-ê°€ì´ë“œ--faq">#</a></h1>
<hr>
<h2 id="-ë¹ ë¥¸-ë¬¸ì œ-ì§„ë‹¨">ğŸ” ë¹ ë¥¸ ë¬¸ì œ ì§„ë‹¨<a hidden class="anchor" aria-hidden="true" href="#-ë¹ ë¥¸-ë¬¸ì œ-ì§„ë‹¨">#</a></h2>
<h3 id="1ë‹¨ê³„-ê¸°ë³¸-ìƒíƒœ-í™•ì¸-30ì´ˆ">1ë‹¨ê³„: ê¸°ë³¸ ìƒíƒœ í™•ì¸ (30ì´ˆ)<a hidden class="anchor" aria-hidden="true" href="#1ë‹¨ê³„-ê¸°ë³¸-ìƒíƒœ-í™•ì¸-30ì´ˆ">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># í•œ ë²ˆì— ì „ì²´ ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get nodes,pods -A | grep -E <span style="color:#e6db74">&#34;(NotReady|Error|CrashLoop|Pending)&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get events -A --sort-by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;.lastTimestamp&#39;</span> | tail -10
</span></span></code></pre></div><h3 id="2ë‹¨ê³„-ì• í”Œë¦¬ì¼€ì´ì…˜ë³„-ìƒíƒœ-1ë¶„">2ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ìƒíƒœ (1ë¶„)<a hidden class="anchor" aria-hidden="true" href="#2ë‹¨ê³„-ì• í”Œë¦¬ì¼€ì´ì…˜ë³„-ìƒíƒœ-1ë¶„">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># OpenWebUI ìƒíƒœ</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n openwebui -o wide
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># LiteLLM ìƒíƒœ  </span>
</span></span><span style="display:flex;"><span>kubectl get pods -n litellm -o wide
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n openwebui -l app<span style="color:#f92672">=</span>postgres
</span></span></code></pre></div><h3 id="3ë‹¨ê³„-ë¦¬ì†ŒìŠ¤-ì‚¬ìš©ëŸ‰-30ì´ˆ">3ë‹¨ê³„: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (30ì´ˆ)<a hidden class="anchor" aria-hidden="true" href="#3ë‹¨ê³„-ë¦¬ì†ŒìŠ¤-ì‚¬ìš©ëŸ‰-30ì´ˆ">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ë…¸ë“œ ë¦¬ì†ŒìŠ¤</span>
</span></span><span style="display:flex;"><span>kubectl top nodes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># íŒŒë“œ ë¦¬ì†ŒìŠ¤</span>
</span></span><span style="display:flex;"><span>kubectl top pods -A --sort-by<span style="color:#f92672">=</span>cpu
</span></span></code></pre></div><hr>
<h2 id="-ì¸í”„ë¼-ê´€ë ¨-ë¬¸ì œ">ğŸ”§ ì¸í”„ë¼ ê´€ë ¨ ë¬¸ì œ<a hidden class="anchor" aria-hidden="true" href="#-ì¸í”„ë¼-ê´€ë ¨-ë¬¸ì œ">#</a></h2>
<h3 id="-ë…¸ë“œê°€-notready-ìƒíƒœ">âŒ ë…¸ë“œê°€ NotReady ìƒíƒœ<a hidden class="anchor" aria-hidden="true" href="#-ë…¸ë“œê°€-notready-ìƒíƒœ">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<pre tabindex="0"><code>NAME       STATUS     ROLES    AGE   VERSION
node-1     NotReady   &lt;none&gt;   1d    v1.28.0
</code></pre><p><strong>ì›ì¸ ë¶„ì„:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ë…¸ë“œ ìƒì„¸ ì •ë³´ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl describe node node-1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë…¸ë“œ ë¡œê·¸ í™•ì¸ (SSH ì ‘ì† í•„ìš”)</span>
</span></span><span style="display:flex;"><span>sudo journalctl -u kubelet -f
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. kubelet ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>sudo systemctl restart kubelet
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë…¸ë“œ ì¬ë¶€íŒ… (ì‹¬ê°í•œ ê²½ìš°)</span>
</span></span><span style="display:flex;"><span>sudo reboot
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ë…¸ë“œ êµì²´ (ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°)</span>
</span></span><span style="display:flex;"><span>kubectl drain node-1 --ignore-daemonsets --delete-emptydir-data
</span></span><span style="display:flex;"><span>kubectl delete node node-1
</span></span><span style="display:flex;"><span><span style="color:#75715e"># AWS ì½˜ì†”ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ (Auto Scalingì´ ìƒˆ ë…¸ë“œ ìƒì„±)</span>
</span></span></code></pre></div><h3 id="-íŒŒë“œê°€-pending-ìƒíƒœ">âŒ íŒŒë“œê°€ Pending ìƒíƒœ<a hidden class="anchor" aria-hidden="true" href="#-íŒŒë“œê°€-pending-ìƒíƒœ">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<pre tabindex="0"><code>NAME                         READY   STATUS    RESTARTS   AGE
openwebui-5f7b8d6c9d-xyz     0/1     Pending   0          5m
</code></pre><p><strong>ì›ì¸ ë¶„ì„:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl describe pod openwebui-5f7b8d6c9d-xyz -n openwebui
</span></span></code></pre></div><p><strong>ì¼ë°˜ì ì¸ ì›ì¸ê³¼ í•´ê²°:</strong></p>
<ol>
<li><strong>ë¦¬ì†ŒìŠ¤ ë¶€ì¡±</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì›ì¸: Insufficient cpu/memory</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># í•´ê²°: ë¦¬ì†ŒìŠ¤ ìš”ì²­ëŸ‰ ì¡°ì • ë˜ëŠ” ë…¸ë“œ ì¶”ê°€</span>
</span></span><span style="display:flex;"><span>kubectl patch deployment openwebui -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;template&#34;:{&#34;spec&#34;:{&#34;containers&#34;:[{&#34;name&#34;:&#34;openwebui&#34;,&#34;resources&#34;:{&#34;requests&#34;:{&#34;cpu&#34;:&#34;100m&#34;,&#34;memory&#34;:&#34;256Mi&#34;}}}]}}}}&#39;</span>
</span></span></code></pre></div><ol start="2">
<li><strong>PVC ë§ˆìš´íŠ¸ ì‹¤íŒ¨</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì›ì¸: PVC not found or pending</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># PVC ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pvc -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># StorageClass í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get storageclass
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># í•´ê²°: PVC ì¬ìƒì„±</span>
</span></span><span style="display:flex;"><span>kubectl delete pvc openwebui-pvc -n openwebui
</span></span><span style="display:flex;"><span>kubectl apply -f kubernetes/base/openwebui/pvc.yaml
</span></span></code></pre></div><ol start="3">
<li><strong>ë…¸ë“œ ì…€ë ‰í„° ë¬¸ì œ</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì›ì¸: No nodes match nodeSelector</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë…¸ë“œ ë ˆì´ë¸” í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get nodes --show-labels
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># í•´ê²°: nodeSelector ì œê±° ë˜ëŠ” ë ˆì´ë¸” ì¶”ê°€</span>
</span></span><span style="display:flex;"><span>kubectl label nodes node-1 environment<span style="color:#f92672">=</span>dev
</span></span></code></pre></div><h3 id="-ì´ë¯¸ì§€-pull-ì‹¤íŒ¨">âŒ ì´ë¯¸ì§€ Pull ì‹¤íŒ¨<a hidden class="anchor" aria-hidden="true" href="#-ì´ë¯¸ì§€-pull-ì‹¤íŒ¨">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<pre tabindex="0"><code>Failed to pull image &#34;ghcr.io/openwebui:latest&#34;: rpc error: code = Unknown desc = failed to pull and unpack image
</code></pre><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì´ë¯¸ì§€ íƒœê·¸ í™•ì¸</span>
</span></span><span style="display:flex;"><span>docker pull ghcr.io/openwebui:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì ‘ê·¼ ê¶Œí•œ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get secret -n openwebui | grep docker
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì´ë¯¸ì§€ íƒœê·¸ ìˆ˜ì •</span>
</span></span><span style="display:flex;"><span>kubectl set image deployment/openwebui openwebui<span style="color:#f92672">=</span>ghcr.io/openwebui:v1.0.0 -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ëŒ€ì²´ ì´ë¯¸ì§€ ì‚¬ìš©</span>
</span></span><span style="display:flex;"><span>kubectl set image deployment/openwebui openwebui<span style="color:#f92672">=</span>nginx:latest -n openwebui
</span></span></code></pre></div><hr>
<h2 id="-ë„¤íŠ¸ì›Œí‚¹-ë¬¸ì œ">ğŸŒ ë„¤íŠ¸ì›Œí‚¹ ë¬¸ì œ<a hidden class="anchor" aria-hidden="true" href="#-ë„¤íŠ¸ì›Œí‚¹-ë¬¸ì œ">#</a></h2>
<h3 id="-ì„œë¹„ìŠ¤-ì—°ê²°-ì‹¤íŒ¨">âŒ ì„œë¹„ìŠ¤ ì—°ê²° ì‹¤íŒ¨<a hidden class="anchor" aria-hidden="true" href="#-ì„œë¹„ìŠ¤-ì—°ê²°-ì‹¤íŒ¨">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl: <span style="color:#f92672">(</span>7<span style="color:#f92672">)</span> Failed to connect to service-name port 80: Connection refused
</span></span></code></pre></div><p><strong>ì§„ë‹¨ ìˆœì„œ:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì„œë¹„ìŠ¤ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get svc -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ì—”ë“œí¬ì¸íŠ¸ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get endpoints -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. íŒŒë“œ ë¼ë²¨ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n openwebui --show-labels
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ì„œë¹„ìŠ¤ ì…€ë ‰í„° í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get svc openwebui-service -n openwebui -o yaml | grep -A <span style="color:#ae81ff">5</span> selector
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì„œë¹„ìŠ¤ì™€ íŒŒë“œ ë¼ë²¨ ë§¤ì¹­ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl patch svc openwebui-service -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;selector&#34;:{&#34;app&#34;:&#34;openwebui&#34;}}}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># íŒŒë“œ ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/openwebui -n openwebui
</span></span></code></pre></div><h3 id="-ingress-ì ‘ê·¼-ë¶ˆê°€">âŒ Ingress ì ‘ê·¼ ë¶ˆê°€<a hidden class="anchor" aria-hidden="true" href="#-ingress-ì ‘ê·¼-ë¶ˆê°€">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl: <span style="color:#f92672">(</span>52<span style="color:#f92672">)</span> Empty reply from server
</span></span></code></pre></div><p><strong>ì§„ë‹¨:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Ingress ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get ingress -n openwebui -o wide
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ingress Controller ìƒíƒœ</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n kube-system -l app.kubernetes.io/name<span style="color:#f92672">=</span>aws-load-balancer-controller
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ALB ìƒíƒœ í™•ì¸ (AWS)</span>
</span></span><span style="display:flex;"><span>aws elbv2 describe-load-balancers
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. Ingress ì¬ìƒì„±</span>
</span></span><span style="display:flex;"><span>kubectl delete ingress openwebui-ingress -n openwebui
</span></span><span style="display:flex;"><span>kubectl apply -f kubernetes/base/ingress/ingress.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ì„œë¹„ìŠ¤ íƒ€ì…ì„ LoadBalancerë¡œ ì„ì‹œ ë³€ê²½</span>
</span></span><span style="display:flex;"><span>kubectl patch svc openwebui-service -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;type&#34;:&#34;LoadBalancer&#34;}}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. í¬íŠ¸ í¬ì›Œë”©ìœ¼ë¡œ ì„ì‹œ ì ‘ê·¼</span>
</span></span><span style="display:flex;"><span>kubectl port-forward svc/openwebui-service 8080:8080 -n openwebui
</span></span></code></pre></div><h3 id="-dns-í•´ì„-ì‹¤íŒ¨">âŒ DNS í•´ì„ ì‹¤íŒ¨<a hidden class="anchor" aria-hidden="true" href="#-dns-í•´ì„-ì‹¤íŒ¨">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nslookup: can<span style="color:#e6db74">&#39;t resolve &#39;</span>service-name.namespace.svc.cluster.local<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span></code></pre></div><p><strong>ì§„ë‹¨ ë° í•´ê²°:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># CoreDNS ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n kube-system -l k8s-app<span style="color:#f92672">=</span>kube-dns
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DNS ì„¤ì • í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get configmap coredns -n kube-system -o yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DNS í…ŒìŠ¤íŠ¸</span>
</span></span><span style="display:flex;"><span>kubectl run debug --image<span style="color:#f92672">=</span>busybox -it --rm -- nslookup kubernetes.default.svc.cluster.local
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># CoreDNS ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/coredns -n kube-system
</span></span></code></pre></div><hr>
<h2 id="-ë°ì´í„°ë² ì´ìŠ¤-ë¬¸ì œ">ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ì œ<a hidden class="anchor" aria-hidden="true" href="#-ë°ì´í„°ë² ì´ìŠ¤-ë¬¸ì œ">#</a></h2>
<h3 id="-postgresql-ì—°ê²°-ì‹¤íŒ¨">âŒ PostgreSQL ì—°ê²° ì‹¤íŒ¨<a hidden class="anchor" aria-hidden="true" href="#-postgresql-ì—°ê²°-ì‹¤íŒ¨">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<pre tabindex="0"><code>psql: FATAL: password authentication failed for user &#34;openwebui&#34;
</code></pre><p><strong>ì§„ë‹¨:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># íŒŒë“œ ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pods -l app<span style="color:#f92672">=</span>postgres -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë¡œê·¸ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl logs deployment/postgres -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ì‹œí¬ë¦¿ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get secret app-secrets -n openwebui -o yaml
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì‹œí¬ë¦¿ ì¬ìƒì„±</span>
</span></span><span style="display:flex;"><span>kubectl delete secret app-secrets -n openwebui
</span></span><span style="display:flex;"><span>kubectl create secret generic app-secrets <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --from-literal<span style="color:#f92672">=</span>POSTGRES_USER<span style="color:#f92672">=</span>openwebui <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --from-literal<span style="color:#f92672">=</span>POSTGRES_PASSWORD<span style="color:#f92672">=</span>newpassword <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë°ì´í„°ë² ì´ìŠ¤ ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/postgres -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì§ì ‘ ì—°ê²° í…ŒìŠ¤íŠ¸</span>
</span></span><span style="display:flex;"><span>kubectl exec -it deployment/postgres -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  psql -U openwebui -d openwebui -c <span style="color:#e6db74">&#34;SELECT 1;&#34;</span>
</span></span></code></pre></div><h3 id="-ë°ì´í„°ë² ì´ìŠ¤-ë””ìŠ¤í¬-ë¶€ì¡±">âŒ ë°ì´í„°ë² ì´ìŠ¤ ë””ìŠ¤í¬ ë¶€ì¡±<a hidden class="anchor" aria-hidden="true" href="#-ë°ì´í„°ë² ì´ìŠ¤-ë””ìŠ¤í¬-ë¶€ì¡±">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<pre tabindex="0"><code>ERROR: could not extend file &#34;base/16384/16439&#34;: No space left on device
</code></pre><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. PVC í¬ê¸° í™•ì¥</span>
</span></span><span style="display:flex;"><span>kubectl patch pvc postgres-pvc -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;resources&#34;:{&#34;requests&#34;:{&#34;storage&#34;:&#34;20Gi&#34;}}}}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë¶ˆí•„ìš”í•œ ë°ì´í„° ì •ë¦¬</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/postgres -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  psql -U openwebui -d openwebui -c <span style="color:#e6db74">&#34;VACUUM FULL;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ë°±ì—… í›„ ë°ì´í„°ë² ì´ìŠ¤ ì¬ìƒì„±</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë°±ì—… ì‹¤í–‰</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/postgres -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  pg_dump -U openwebui openwebui &gt; backup.sql
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># PVC ì‚­ì œ ë° ì¬ìƒì„±</span>
</span></span><span style="display:flex;"><span>kubectl delete pvc postgres-pvc -n openwebui
</span></span><span style="display:flex;"><span>kubectl apply -f kubernetes/base/postgres/pvc.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë³µì›</span>
</span></span><span style="display:flex;"><span>kubectl exec -i deployment/postgres -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  psql -U openwebui openwebui &lt; backup.sql
</span></span></code></pre></div><hr>
<h2 id="-ì• í”Œë¦¬ì¼€ì´ì…˜-ë¬¸ì œ">ğŸ¤– ì• í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œ<a hidden class="anchor" aria-hidden="true" href="#-ì• í”Œë¦¬ì¼€ì´ì…˜-ë¬¸ì œ">#</a></h2>
<h3 id="-openwebui-500-ì—ëŸ¬">âŒ OpenWebUI 500 ì—ëŸ¬<a hidden class="anchor" aria-hidden="true" href="#-openwebui-500-ì—ëŸ¬">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<pre tabindex="0"><code>HTTP 500 Internal Server Error
</code></pre><p><strong>ì§„ë‹¨:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl logs deployment/openwebui -n openwebui --tail<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># í™˜ê²½ ë³€ìˆ˜ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/openwebui -n openwebui -- env | grep -E <span style="color:#e6db74">&#34;(DATABASE|SECRET)&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># í—¬ìŠ¤ì²´í¬ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/openwebui -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  curl -f http://localhost:8080/health
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/openwebui -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. í™˜ê²½ ë³€ìˆ˜ í™•ì¸ ë° ìˆ˜ì •</span>
</span></span><span style="display:flex;"><span>kubectl patch deployment openwebui -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;template&#34;:{&#34;spec&#34;:{&#34;containers&#34;:[{&#34;name&#34;:&#34;openwebui&#34;,&#34;env&#34;:[{&#34;name&#34;:&#34;DEBUG&#34;,&#34;value&#34;:&#34;true&#34;}]}]}}}}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±</span>
</span></span><span style="display:flex;"><span>kubectl rollout undo deployment/openwebui -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/openwebui -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  nc -zv postgres-service <span style="color:#ae81ff">5432</span>
</span></span></code></pre></div><h3 id="-litellm-api-ì‘ë‹µ-ì—†ìŒ">âŒ LiteLLM API ì‘ë‹µ ì—†ìŒ<a hidden class="anchor" aria-hidden="true" href="#-litellm-api-ì‘ë‹µ-ì—†ìŒ">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl: <span style="color:#f92672">(</span>7<span style="color:#f92672">)</span> Failed to connect to litellm-service port <span style="color:#ae81ff">4000</span>
</span></span></code></pre></div><p><strong>ì§„ë‹¨ ë° í•´ê²°:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># íŒŒë“œ ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pods -l app<span style="color:#f92672">=</span>litellm -n litellm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># API í‚¤ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get secret api-keys -n litellm -o yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ì„¤ì • íŒŒì¼ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get configmap litellm-config -n litellm -o yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ì§ì ‘ API í…ŒìŠ¤íŠ¸</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/litellm -n litellm -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  curl -s http://localhost:4000/health
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/litellm -n litellm
</span></span></code></pre></div><h3 id="-ë©”ëª¨ë¦¬-ë¶€ì¡±-oomkilled">âŒ ë©”ëª¨ë¦¬ ë¶€ì¡± (OOMKilled)<a hidden class="anchor" aria-hidden="true" href="#-ë©”ëª¨ë¦¬-ë¶€ì¡±-oomkilled">#</a></h3>
<p><strong>ì¦ìƒ:</strong></p>
<pre tabindex="0"><code>Last State: Terminated
Reason: OOMKilled
</code></pre><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ë©”ëª¨ë¦¬ ë¦¬ë¯¸íŠ¸ ì¦ê°€</span>
</span></span><span style="display:flex;"><span>kubectl patch deployment openwebui -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;template&#34;:{&#34;spec&#34;:{&#34;containers&#34;:[{&#34;name&#34;:&#34;openwebui&#34;,&#34;resources&#34;:{&#34;limits&#34;:{&#34;memory&#34;:&#34;2Gi&#34;}}}]}}}}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl top pods -n openwebui --containers
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ë©”ëª¨ë¦¬ ìš”ì²­ëŸ‰ ì¡°ì •</span>
</span></span><span style="display:flex;"><span>kubectl patch deployment openwebui -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;template&#34;:{&#34;spec&#34;:{&#34;containers&#34;:[{&#34;name&#34;:&#34;openwebui&#34;,&#34;resources&#34;:{&#34;requests&#34;:{&#34;memory&#34;:&#34;512Mi&#34;}}}]}}}}&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="-ì„±ëŠ¥-ë¬¸ì œ">ğŸ“Š ì„±ëŠ¥ ë¬¸ì œ<a hidden class="anchor" aria-hidden="true" href="#-ì„±ëŠ¥-ë¬¸ì œ">#</a></h2>
<h3 id="-ëŠë¦°-ì‘ë‹µ-ì‹œê°„">âŒ ëŠë¦° ì‘ë‹µ ì‹œê°„<a hidden class="anchor" aria-hidden="true" href="#-ëŠë¦°-ì‘ë‹µ-ì‹œê°„">#</a></h3>
<p><strong>ì§„ë‹¨:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì‘ë‹µ ì‹œê°„ ì¸¡ì •</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/openwebui -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  curl -w <span style="color:#e6db74">&#34;Total time: %{time_total}s\n&#34;</span> -o /dev/null -s http://localhost:8080
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl top pods -n openwebui --containers
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì„±ëŠ¥ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/postgres -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  psql -U openwebui -d openwebui -c <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#34;SELECT query, mean_exec_time FROM pg_stat_statements ORDER BY mean_exec_time DESC LIMIT 5;&#34;</span>
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. HPA ìŠ¤ì¼€ì¼ë§ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get hpa -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ìˆ˜ë™ ìŠ¤ì¼€ì¼ë§</span>
</span></span><span style="display:flex;"><span>kubectl scale deployment openwebui --replicas<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ë¦¬ì†ŒìŠ¤ ì¦ëŸ‰</span>
</span></span><span style="display:flex;"><span>kubectl patch deployment openwebui -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;template&#34;:{&#34;spec&#34;:{&#34;containers&#34;:[{&#34;name&#34;:&#34;openwebui&#34;,&#34;resources&#34;:{&#34;requests&#34;:{&#34;cpu&#34;:&#34;500m&#34;,&#34;memory&#34;:&#34;1Gi&#34;}}}]}}}}&#39;</span>
</span></span></code></pre></div><h3 id="-ë†’ì€-cpu-ì‚¬ìš©ë¥ ">âŒ ë†’ì€ CPU ì‚¬ìš©ë¥ <a hidden class="anchor" aria-hidden="true" href="#-ë†’ì€-cpu-ì‚¬ìš©ë¥ ">#</a></h3>
<p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># CPU ì‚¬ìš©ë¥  í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl top pods -n openwebui --sort-by<span style="color:#f92672">=</span>cpu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># í”„ë¡œíŒŒì¼ë§ (ê°€ëŠ¥í•œ ê²½ìš°)</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/openwebui -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  curl -s http://localhost:8080/debug/pprof/profile &gt; cpu.prof
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ìˆ˜í‰ ìŠ¤ì¼€ì¼ë§</span>
</span></span><span style="display:flex;"><span>kubectl patch hpa openwebui-hpa -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;targetCPUUtilizationPercentage&#34;:50}}&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="-ë³´ì•ˆ-ë¬¸ì œ">ğŸ”’ ë³´ì•ˆ ë¬¸ì œ<a hidden class="anchor" aria-hidden="true" href="#-ë³´ì•ˆ-ë¬¸ì œ">#</a></h2>
<h3 id="-ì´ë¯¸ì§€-ì·¨ì•½ì ">âŒ ì´ë¯¸ì§€ ì·¨ì•½ì <a hidden class="anchor" aria-hidden="true" href="#-ì´ë¯¸ì§€-ì·¨ì•½ì ">#</a></h3>
<p><strong>ì§„ë‹¨:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì´ë¯¸ì§€ ìŠ¤ìº”</span>
</span></span><span style="display:flex;"><span>trivy image ghcr.io/openwebui:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ì‹¤í–‰ ì¤‘ì¸ ì´ë¯¸ì§€ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n openwebui -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.items[*].spec.containers[*].image}&#39;</span>
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ìµœì‹  ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸</span>
</span></span><span style="display:flex;"><span>kubectl set image deployment/openwebui openwebui<span style="color:#f92672">=</span>ghcr.io/openwebui:v1.0.1 -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë³´ì•ˆ íŒ¨ì¹˜ëœ ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì‚¬ìš©</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Dockerfile ìˆ˜ì • í›„ ì¬ë¹Œë“œ í•„ìš”</span>
</span></span></code></pre></div><h3 id="-ì‹œí¬ë¦¿-ë…¸ì¶œ">âŒ ì‹œí¬ë¦¿ ë…¸ì¶œ<a hidden class="anchor" aria-hidden="true" href="#-ì‹œí¬ë¦¿-ë…¸ì¶œ">#</a></h3>
<p><strong>ì§„ë‹¨:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ì‹œí¬ë¦¿ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get secrets -A
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># íŒŒë“œì—ì„œ ì‹œí¬ë¦¿ ì‚¬ìš© í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n openwebui -o yaml | grep -A <span style="color:#ae81ff">10</span> secretRef
</span></span></code></pre></div><p><strong>í•´ê²° ë°©ë²•:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì‹œí¬ë¦¿ ë¡œí…Œì´ì…˜</span>
</span></span><span style="display:flex;"><span>kubectl delete secret api-keys -n litellm
</span></span><span style="display:flex;"><span>kubectl create secret generic api-keys <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --from-literal<span style="color:#f92672">=</span>OPENAI_API_KEY<span style="color:#f92672">=</span>new-secure-key <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -n litellm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/litellm -n litellm
</span></span></code></pre></div><hr>
<h2 id="-faq-ìì£¼-ë¬»ëŠ”-ì§ˆë¬¸">ğŸ“‹ FAQ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)<a hidden class="anchor" aria-hidden="true" href="#-faq-ìì£¼-ë¬»ëŠ”-ì§ˆë¬¸">#</a></h2>
<h3 id="q1-íŒŒë“œê°€-ê³„ì†-ì¬ì‹œì‘ë˜ëŠ”-ì´ìœ ëŠ”">Q1: íŒŒë“œê°€ ê³„ì† ì¬ì‹œì‘ë˜ëŠ” ì´ìœ ëŠ”?<a hidden class="anchor" aria-hidden="true" href="#q1-íŒŒë“œê°€-ê³„ì†-ì¬ì‹œì‘ë˜ëŠ”-ì´ìœ ëŠ”">#</a></h3>
<p><strong>A:</strong> ê°€ì¥ ì¼ë°˜ì ì¸ ì›ì¸ë“¤:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨</span>
</span></span><span style="display:flex;"><span>kubectl describe pod &lt;pod-name&gt; -n openwebui | grep -A <span style="color:#ae81ff">10</span> Events
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë©”ëª¨ë¦¬ ë¶€ì¡± (OOMKilled)</span>
</span></span><span style="display:flex;"><span>kubectl describe pod &lt;pod-name&gt; -n openwebui | grep OOMKilled
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì—ëŸ¬</span>
</span></span><span style="display:flex;"><span>kubectl logs &lt;pod-name&gt; -n openwebui --previous
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># í•´ê²°: ë¦¬ì†ŒìŠ¤ ì¦ëŸ‰ ë˜ëŠ” í—¬ìŠ¤ì²´í¬ ì¡°ì •</span>
</span></span></code></pre></div><h3 id="q2-ë°°í¬-í›„-ì™¸ë¶€ì—ì„œ-ì ‘ê·¼ì´-ì•ˆ-ë¼ìš”">Q2: ë°°í¬ í›„ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ì•ˆ ë¼ìš”<a hidden class="anchor" aria-hidden="true" href="#q2-ë°°í¬-í›„-ì™¸ë¶€ì—ì„œ-ì ‘ê·¼ì´-ì•ˆ-ë¼ìš”">#</a></h3>
<p><strong>A:</strong> ë‹¨ê³„ë³„ í™•ì¸:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. íŒŒë“œ ìƒíƒœ</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ì„œë¹„ìŠ¤ ìƒíƒœ  </span>
</span></span><span style="display:flex;"><span>kubectl get svc -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. Ingress ìƒíƒœ</span>
</span></span><span style="display:flex;"><span>kubectl get ingress -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ë¡œë“œë°¸ëŸ°ì„œ ìƒíƒœ (AWS ì½˜ì†” í™•ì¸)</span>
</span></span><span style="display:flex;"><span>aws elbv2 describe-load-balancers
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ì„ì‹œ í•´ê²°: í¬íŠ¸ í¬ì›Œë”©</span>
</span></span><span style="display:flex;"><span>kubectl port-forward svc/openwebui-service 8080:8080 -n openwebui
</span></span></code></pre></div><h3 id="q3-ë°ì´í„°ê°€-ì‚¬ë¼ì¡Œì–´ìš”">Q3: ë°ì´í„°ê°€ ì‚¬ë¼ì¡Œì–´ìš”<a hidden class="anchor" aria-hidden="true" href="#q3-ë°ì´í„°ê°€-ì‚¬ë¼ì¡Œì–´ìš”">#</a></h3>
<p><strong>A:</strong> ë°ì´í„° ë³µêµ¬ ë°©ë²•:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. PVC ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get pvc -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë°±ì—…ì—ì„œ ë³µì›</span>
</span></span><span style="display:flex;"><span>aws s3 ls s3://openwebui-backups/database/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ìµœì‹  ë°±ì—…ìœ¼ë¡œ ë³µì›</span>
</span></span><span style="display:flex;"><span>./restore-database.sh openwebui_backup_20240301_120000.sql
</span></span></code></pre></div><h3 id="q4-api-í‚¤ê°€-ì‘ë™í•˜ì§€-ì•Šì•„ìš”">Q4: API í‚¤ê°€ ì‘ë™í•˜ì§€ ì•Šì•„ìš”<a hidden class="anchor" aria-hidden="true" href="#q4-api-í‚¤ê°€-ì‘ë™í•˜ì§€-ì•Šì•„ìš”">#</a></h3>
<p><strong>A:</strong> API í‚¤ í™•ì¸ ë° ì—…ë°ì´íŠ¸:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. í˜„ì¬ ì‹œí¬ë¦¿ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get secret api-keys -n litellm -o yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë””ì½”ë”©í•´ì„œ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl get secret api-keys -n litellm -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.data.OPENAI_API_KEY}&#39;</span> | base64 -d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ìƒˆ í‚¤ë¡œ ì—…ë°ì´íŠ¸</span>
</span></span><span style="display:flex;"><span>kubectl create secret generic api-keys <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --from-literal<span style="color:#f92672">=</span>OPENAI_API_KEY<span style="color:#f92672">=</span>sk-new-key <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --dry-run<span style="color:#f92672">=</span>client -o yaml | kubectl apply -f -
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. íŒŒë“œ ì¬ì‹œì‘</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/litellm -n litellm
</span></span></code></pre></div><h3 id="q5-ë¹„ìš©ì´-ì˜ˆìƒë³´ë‹¤-ë§ì´-ë‚˜ì™€ìš”">Q5: ë¹„ìš©ì´ ì˜ˆìƒë³´ë‹¤ ë§ì´ ë‚˜ì™€ìš”<a hidden class="anchor" aria-hidden="true" href="#q5-ë¹„ìš©ì´-ì˜ˆìƒë³´ë‹¤-ë§ì´-ë‚˜ì™€ìš”">#</a></h3>
<p><strong>A:</strong> ë¹„ìš© ìµœì í™” ë°©ë²•:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl top nodes
</span></span><span style="display:flex;"><span>kubectl top pods -A
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. Spot ì¸ìŠ¤í„´ìŠ¤ í™œìš©</span>
</span></span><span style="display:flex;"><span>kubectl get nodes -l node.kubernetes.io/instance-type
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ ì •ë¦¬</span>
</span></span><span style="display:flex;"><span>kubectl get pods -A --field-selector<span style="color:#f92672">=</span>status.phase<span style="color:#f92672">=</span>Succeeded
</span></span><span style="display:flex;"><span>kubectl delete pods --field-selector<span style="color:#f92672">=</span>status.phase<span style="color:#f92672">=</span>Succeeded -A
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. HPA ìµœì í™”</span>
</span></span><span style="display:flex;"><span>kubectl patch hpa openwebui-hpa -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;minReplicas&#34;:1,&#34;targetCPUUtilizationPercentage&#34;:70}}&#39;</span>
</span></span></code></pre></div><h3 id="q6-ë¡œê·¸ë¥¼-ì–´ë””ì„œ-í™•ì¸í•˜ë‚˜ìš”">Q6: ë¡œê·¸ë¥¼ ì–´ë””ì„œ í™•ì¸í•˜ë‚˜ìš”?<a hidden class="anchor" aria-hidden="true" href="#q6-ë¡œê·¸ë¥¼-ì–´ë””ì„œ-í™•ì¸í•˜ë‚˜ìš”">#</a></h3>
<p><strong>A:</strong> ë¡œê·¸ í™•ì¸ ë°©ë²•:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì‹¤ì‹œê°„ ë¡œê·¸</span>
</span></span><span style="display:flex;"><span>kubectl logs -f deployment/openwebui -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. íŠ¹ì • ì‹œê°„ëŒ€ ë¡œê·¸</span>
</span></span><span style="display:flex;"><span>kubectl logs --since<span style="color:#f92672">=</span>1h deployment/openwebui -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì´ì „ ì»¨í…Œì´ë„ˆ ë¡œê·¸ (ì¬ì‹œì‘ëœ ê²½ìš°)</span>
</span></span><span style="display:flex;"><span>kubectl logs deployment/openwebui -n openwebui --previous
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ëª¨ë“  íŒŒë“œ ë¡œê·¸</span>
</span></span><span style="display:flex;"><span>kubectl logs -l app<span style="color:#f92672">=</span>openwebui -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 5. ì¤‘ì•™í™”ëœ ë¡œê¹… (Kibana)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># http://kibana.your-domain.comì—ì„œ í™•ì¸</span>
</span></span></code></pre></div><h3 id="q7-ì„±ëŠ¥ì´-ëŠë ¤ì¡Œì–´ìš”">Q7: ì„±ëŠ¥ì´ ëŠë ¤ì¡Œì–´ìš”<a hidden class="anchor" aria-hidden="true" href="#q7-ì„±ëŠ¥ì´-ëŠë ¤ì¡Œì–´ìš”">#</a></h3>
<p><strong>A:</strong> ì„±ëŠ¥ ì§„ë‹¨ ë‹¨ê³„:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl top pods -n openwebui --containers
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ì‘ë‹µ ì‹œê°„ ì¸¡ì •</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/openwebui -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  curl -w <span style="color:#e6db74">&#34;%{time_total}&#34;</span> -o /dev/null -s http://localhost:8080
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/postgres -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  psql -U openwebui -d openwebui -c <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#34;SELECT * FROM pg_stat_activity WHERE state = &#39;active&#39;;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ìŠ¤ì¼€ì¼ë§ ì‹¤í–‰</span>
</span></span><span style="display:flex;"><span>kubectl scale deployment openwebui --replicas<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> -n openwebui
</span></span></code></pre></div><h3 id="q8-ì—…ë°ì´íŠ¸ëŠ”-ì–´ë–»ê²Œ-í•˜ë‚˜ìš”">Q8: ì—…ë°ì´íŠ¸ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?<a hidden class="anchor" aria-hidden="true" href="#q8-ì—…ë°ì´íŠ¸ëŠ”-ì–´ë–»ê²Œ-í•˜ë‚˜ìš”">#</a></h3>
<p><strong>A:</strong> ì•ˆì „í•œ ì—…ë°ì´íŠ¸ ë°©ë²•:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ë°±ì—… ë¨¼ì € ì‹¤í–‰</span>
</span></span><span style="display:flex;"><span>./backup-database.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ìƒˆ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸</span>
</span></span><span style="display:flex;"><span>kubectl set image deployment/openwebui openwebui<span style="color:#f92672">=</span>ghcr.io/openwebui:v1.1.0 -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ë¡¤ì•„ì›ƒ ìƒíƒœ í™•ì¸</span>
</span></span><span style="display:flex;"><span>kubectl rollout status deployment/openwebui -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ë¬¸ì œ ë°œìƒ ì‹œ ë¡¤ë°±</span>
</span></span><span style="display:flex;"><span>kubectl rollout undo deployment/openwebui -n openwebui
</span></span></code></pre></div><hr>
<h2 id="-ê¸´ê¸‰-ìƒí™©ë³„-ëŒ€ì‘">ğŸ†˜ ê¸´ê¸‰ ìƒí™©ë³„ ëŒ€ì‘<a hidden class="anchor" aria-hidden="true" href="#-ê¸´ê¸‰-ìƒí™©ë³„-ëŒ€ì‘">#</a></h2>
<h3 id="-ì „ì²´-ì„œë¹„ìŠ¤-ë‹¤ìš´">ğŸ”¥ ì „ì²´ ì„œë¹„ìŠ¤ ë‹¤ìš´<a hidden class="anchor" aria-hidden="true" href="#-ì „ì²´-ì„œë¹„ìŠ¤-ë‹¤ìš´">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì¦‰ì‹œ ìƒíƒœ í™•ì¸ (30ì´ˆ)</span>
</span></span><span style="display:flex;"><span>kubectl get nodes,pods -A | grep -v Running
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. íŠ¸ë˜í”½ ì°¨ë‹¨ (ì„ì‹œ ì ê²€ í˜ì´ì§€)</span>
</span></span><span style="display:flex;"><span>kubectl patch ingress openwebui-ingress -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;metadata&#34;:{&#34;annotations&#34;:{&#34;nginx.ingress.kubernetes.io/server-snippet&#34;:&#34;return 503 \&#34;Service temporarily unavailable\&#34;;&#34;}}}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. í•µì‹¬ ì„œë¹„ìŠ¤ë¶€í„° ë³µêµ¬</span>
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/postgres -n openwebui
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/litellm -n litellm  
</span></span><span style="display:flex;"><span>kubectl rollout restart deployment/openwebui -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. ìƒíƒœ í™•ì¸ í›„ íŠ¸ë˜í”½ ë³µêµ¬</span>
</span></span><span style="display:flex;"><span>kubectl patch ingress openwebui-ingress -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;metadata&#34;:{&#34;annotations&#34;:{&#34;nginx.ingress.kubernetes.io/server-snippet&#34;:null}}}&#39;</span>
</span></span></code></pre></div><h3 id="-ë°ì´í„°-ì†ì‹¤-ìœ„í—˜">ğŸ’¾ ë°ì´í„° ì†ì‹¤ ìœ„í—˜<a hidden class="anchor" aria-hidden="true" href="#-ë°ì´í„°-ì†ì‹¤-ìœ„í—˜">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì¦‰ì‹œ ë°±ì—… ì‹¤í–‰</span>
</span></span><span style="display:flex;"><span>kubectl exec deployment/postgres -n openwebui -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  pg_dump -U openwebui openwebui &gt; emergency_backup_<span style="color:#66d9ef">$(</span>date +%Y%m%d_%H%M%S<span style="color:#66d9ef">)</span>.sql
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. PVC ìŠ¤ëƒ…ìƒ· ìƒì„± (AWS EBS)</span>
</span></span><span style="display:flex;"><span>aws ec2 describe-volumes --filters <span style="color:#e6db74">&#34;Name=tag:kubernetes.io/created-for/pvc/name,Values=postgres-pvc&#34;</span>
</span></span><span style="display:flex;"><span>aws ec2 create-snapshot --volume-id vol-xxxxxxxxx --description <span style="color:#e6db74">&#34;Emergency snapshot&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì½ê¸° ì „ìš© ëª¨ë“œë¡œ ì „í™˜ (ë°ì´í„° ë³´í˜¸)</span>
</span></span><span style="display:flex;"><span>kubectl patch deployment openwebui -n openwebui -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;replicas&#34;:0}}&#39;</span>
</span></span></code></pre></div><h3 id="-ë³´ì•ˆ-ì¹¨í•´-ì˜ì‹¬">ğŸš¨ ë³´ì•ˆ ì¹¨í•´ ì˜ì‹¬<a hidden class="anchor" aria-hidden="true" href="#-ë³´ì•ˆ-ì¹¨í•´-ì˜ì‹¬">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. ì¦‰ì‹œ ë„¤íŠ¸ì›Œí¬ ì°¨ë‹¨</span>
</span></span><span style="display:flex;"><span>kubectl delete ingress openwebui-ingress -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ë¡œê·¸ ìˆ˜ì§‘ ë° ë³´ì¡´</span>
</span></span><span style="display:flex;"><span>kubectl logs deployment/openwebui -n openwebui &gt; security_logs_<span style="color:#66d9ef">$(</span>date +%Y%m%d_%H%M%S<span style="color:#66d9ef">)</span>.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. ì‹œí¬ë¦¿ ë¡œí…Œì´ì…˜</span>
</span></span><span style="display:flex;"><span>kubectl delete secret api-keys -n litellm
</span></span><span style="display:flex;"><span>kubectl delete secret app-secrets -n openwebui
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. í¬ë Œì‹ ë¶„ì„ìš© íŒŒë“œ ì´ë¯¸ì§€ ë³´ì¡´</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n openwebui -o yaml &gt; pods_snapshot_<span style="color:#66d9ef">$(</span>date +%Y%m%d_%H%M%S<span style="color:#66d9ef">)</span>.yaml
</span></span></code></pre></div><hr>
<h3 id="ë¬¸ì„œ-ê°œì„ -ìš”ì²­">ë¬¸ì„œ ê°œì„  ìš”ì²­<a hidden class="anchor" aria-hidden="true" href="#ë¬¸ì„œ-ê°œì„ -ìš”ì²­">#</a></h3>
<ul>
<li>ìƒˆë¡œìš´ ë¬¸ì œ ë°œìƒ ì‹œ ì´ ë¬¸ì„œì— ì¶”ê°€</li>
<li>í•´ê²°ì±…ì´ íš¨ê³¼ì ì´ì§€ ì•Šì€ ê²½ìš° í”¼ë“œë°±</li>
<li>ë” ë‚˜ì€ í•´ê²° ë°©ë²• ë°œê²¬ ì‹œ ê³µìœ </li>
</ul>
<hr>
<h2 id="-ë¬¸ì œ-í•´ê²°-ì²´í¬ë¦¬ìŠ¤íŠ¸">ğŸ”„ ë¬¸ì œ í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸<a hidden class="anchor" aria-hidden="true" href="#-ë¬¸ì œ-í•´ê²°-ì²´í¬ë¦¬ìŠ¤íŠ¸">#</a></h2>
<p>ë¬¸ì œ ë°œìƒ ì‹œ ë‹¤ìŒ ìˆœì„œë¡œ ì§„í–‰:</p>
<ul>
<li><input disabled="" type="checkbox"> ê¸°ë³¸ ìƒíƒœ í™•ì¸ (ë…¸ë“œ, íŒŒë“œ, ì„œë¹„ìŠ¤)</li>
<li><input disabled="" type="checkbox"> ë¡œê·¸ í™•ì¸ (ì• í”Œë¦¬ì¼€ì´ì…˜, ì‹œìŠ¤í…œ)</li>
<li><input disabled="" type="checkbox"> ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸</li>
<li><input disabled="" type="checkbox"> ìµœê·¼ ë³€ê²½ì‚¬í•­ í™•ì¸</li>
<li><input disabled="" type="checkbox"> ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸</li>
<li><input disabled="" type="checkbox"> ë°±ì—… ìƒíƒœ í™•ì¸</li>
<li><input disabled="" type="checkbox"> ì„ì‹œ í•´ê²°ì±… ì ìš©</li>
<li><input disabled="" type="checkbox"> ê·¼ë³¸ ì›ì¸ ë¶„ì„</li>
<li><input disabled="" type="checkbox"> ì˜êµ¬ í•´ê²°ì±… ì ìš©</li>
<li><input disabled="" type="checkbox"> ë¬¸ì„œ ì—…ë°ì´íŠ¸</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://8dobibim.github.io/backend/%EC%9A%B4%EC%98%81-%EB%A9%94%EB%89%B4%EC%96%BC/">
    <span class="title">Â« Prev</span>
    <br>
    <span></span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://8dobibim.github.io/">8dobibim Tech Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
